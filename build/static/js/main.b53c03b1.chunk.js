/*! For license information please see main.b53c03b1.chunk.js.LICENSE.txt */
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{11:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return n})),s.d(t,"f",(function(){return l})),s.d(t,"d",(function(){return o})),s.d(t,"e",(function(){return i})),s.d(t,"c",(function(){return d}));var a=s(2),c=s(5);const r={GET_NOTIFIES:"GET_NOTIFIES",CREATE_NOTIFY:"CREATE_NOTIFY",REMOVE_NOTIFY:"REMOVE_NOTIFY",UPDATE_NOTIFY:"UPDATE_NOTIFY",UPDATE_SOUND:"UPDATE_SOUND",DELETE_ALL_NOTIFICATIONS:"DELETE_ALL_NOTIFICATIONS"},n=e=>{let{msg:t,auth:s,socket:r}=e;return async e=>{try{const e=await Object(c.d)("notify",t,s.token);r.emit("createNotify",{...e.data.notify,user:{username:s.user.username,avatar:s.user.avatar}})}catch(n){e({type:a.c.ALERT,payload:{error:n.response.data.msg}})}}},l=e=>{let{msg:t,auth:s,socket:r}=e;return async e=>{try{await Object(c.a)(`notify/${t.id}?url=${t.url}`,s.token),r.emit("removeNotify",t)}catch(n){e({type:a.c.ALERT,payload:{error:n.response.data.msg}})}}},o=e=>async t=>{try{const s=await Object(c.b)("notifies",e);t({type:r.GET_NOTIFIES,payload:s.data.notifies})}catch(s){t({type:a.c.ALERT,payload:{error:s.response.data.msg}})}},i=e=>{let{msg:t,auth:s}=e;return async e=>{e({type:r.UPDATE_NOTIFY,payload:{...t,isRead:!0}});try{await Object(c.c)(`isReadNotify/${t._id}`,null,s.token)}catch(n){e({type:a.c.ALERT,payload:{error:n.response.data.msg}})}}},d=e=>async t=>{t({type:r.DELETE_ALL_NOTIFICATIONS,payload:[]});try{await Object(c.a)("deleteAllNotify",e)}catch(s){t({type:a.c.ALERT,payload:{error:s.response.data.msg}})}}},112:function(e,t,s){"use strict";s.r(t);s(1);var a=s(119),c=s(0);t.default=()=>(console.log("ki"),Object(c.jsxs)("div",{className:"message d-flex",children:[Object(c.jsx)("div",{className:"col-md-4 px-0",style:{borderRight:"1px solid #ddd"},children:Object(c.jsx)(a.a,{})}),Object(c.jsx)("div",{className:"col-md-8 px-0",children:Object(c.jsxs)("div",{className:"d-flex justify-content-center align-items-center flex-column h-100",children:[Object(c.jsx)("i",{className:"fa fa-bolt color-c1",style:{fontSize:"5rem"}}),Object(c.jsx)("h4",{children:"Messenger"})]})})]}))},114:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s(4),r=s(13),n=s(9),l=s(33),o=s(0);t.default=()=>{const{auth:e,alert:t}=Object(c.c)((e=>e)),s=Object(c.b)(),i=Object(r.f)(),[d,j]=Object(a.useState)({fullname:"",username:"",email:"",password:"",cf_password:"",gender:"male"}),{fullname:m,username:u,email:b,password:p,cf_password:h}=d,[O,x]=Object(a.useState)(!1),[y,f]=Object(a.useState)(!1);Object(a.useEffect)((()=>{e.token&&i.push("/")}),[e.token,i]);const g=e=>{const{name:t,value:s}=e.target;j({...d,[t]:s})};return Object(o.jsx)("div",{className:"auth_page",children:Object(o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s(Object(l.f)(d))},className:"inner-shadow",children:[Object(o.jsx)("h3",{className:"text-uppercase text-center mb-4 auth-heading",style:{color:"crimson"},children:"Socialgram"}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"fullname",className:"form-label",children:"Full name"}),Object(o.jsx)("div",{className:"outer-shadow hover-in-shadow form-input-wrap",children:Object(o.jsx)("input",{type:"text",className:"form-control",id:"fullname",onChange:g,value:m,name:"fullname",style:{background:(t.fullname?"#fd2d6a14":"")+" "}})}),Object(o.jsx)("small",{className:"form-text text-danger",children:t.fullname?t.fullname:""})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"username",className:"form-label",children:"User name"}),Object(o.jsx)("div",{className:"outer-shadow hover-in-shadow form-input-wrap",children:Object(o.jsx)("input",{type:"text",className:"form-control",id:"username",onChange:g,value:u.toLowerCase().replace(/ /g,""),name:"username",style:{background:(t.username?"#fd2d6a14":"")+" "}})}),Object(o.jsx)("small",{className:"form-text text-danger",children:t.username?t.username:""})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email address"}),Object(o.jsx)("div",{className:"outer-shadow hover-in-shadow form-input-wrap",children:Object(o.jsx)("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",onChange:g,value:b,name:"email",style:{background:(t.email?"#fd2d6a14":"")+" "}})}),Object(o.jsx)("small",{className:"form-text text-danger",children:t.email?t.email:""})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(o.jsx)("div",{className:"pass",children:Object(o.jsxs)("div",{className:"outer-shadow hover-in-shadow form-input-wrap",children:[Object(o.jsx)("input",{type:O?"text":"password",className:"form-control",id:"password",onChange:g,value:p,name:"password",style:{background:(t.password?"#fd2d6a14":"")+" "}}),Object(o.jsx)("small",{onClick:()=>x(!O),children:O?"Hide":"Show"})]})}),Object(o.jsx)("small",{className:"form-text text-danger",children:t.password?t.password:""})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"cf_password",className:"form-label",children:"Confirm Password"}),Object(o.jsx)("div",{className:"pass",children:Object(o.jsxs)("div",{className:"outer-shadow hover-in-shadow form-input-wrap",children:[Object(o.jsx)("input",{type:y?"text":"password",className:"form-control",id:"cf_password",onChange:g,value:h,name:"cf_password",style:{background:(t.cf_password?"#fd2d6a14":"")+" "}}),Object(o.jsx)("small",{onClick:()=>f(!y),children:y?"Hide":"Show"})]})}),Object(o.jsx)("small",{className:"form-text text-danger",children:t.cf_password?t.cf_password:""})]}),Object(o.jsxs)("div",{className:"d-flex justify-content-evenly  mx-0 mb-1",children:[Object(o.jsxs)("label",{htmlFor:"male",children:["Male:",Object(o.jsx)("input",{type:"radio",id:"male",name:"gender",value:"male",defaultChecked:!0,onChange:g})]}),Object(o.jsxs)("label",{htmlFor:"female",children:["Female:",Object(o.jsx)("input",{type:"radio",id:"female",name:"gender",value:"female",onChange:g})]})]}),Object(o.jsx)("button",{type:"submit",className:"btn-1 w-100 d-flex outer-shadow hover-in-shadow justify-content-center",style:{color:"crimson"},children:"Register"}),Object(o.jsxs)("p",{className:"my-2",children:["Already have an account?"," ",Object(o.jsx)(n.b,{to:"/",style:{color:"crimson"},children:"Login Now."})]})]})})}},115:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s(9),r=s(4),n=s(33),l=(s(306),s(123),s(15)),o=s(0);var i=()=>{const{auth:e,admin:t,socket:s}=Object(r.c)((e=>e)),c=Object(r.b)();return Object(a.useEffect)((()=>{c(Object(l.i)(e.token)),c(Object(l.g)(e.token)),c(Object(l.e)(e.token)),c(Object(l.f)(e.token)),c(Object(l.h)(e.token)),c(Object(l.d)({auth:e,socket:s}))}),[c,e.token,s,e]),Object(o.jsx)("div",{className:"main_admin",children:Object(o.jsxs)("div",{className:"main__container",children:[Object(o.jsx)("div",{className:"main__title",children:Object(o.jsxs)("div",{className:"main__greeting",children:[Object(o.jsxs)("h1",{children:["Hello ",e.user.username]}),Object(o.jsx)("p",{children:"Welcome to your Admin Dashboard"})]})}),Object(o.jsxs)("div",{className:"main__cards",children:[Object(o.jsxs)("div",{className:"card_admin",children:[Object(o.jsx)("i",{className:"fa fa-users fa-2x text-lightblue","aria-hidden":"true"}),Object(o.jsxs)("div",{className:"card_inner_admin",children:[Object(o.jsx)("p",{className:"text-primary-p",children:"Total Users"}),Object(o.jsx)("span",{className:"font-bold text-title",children:t.total_users})]})]}),Object(o.jsxs)("div",{className:"card_admin",children:[Object(o.jsx)("i",{className:"fa fa-comments fa-2x text-red","aria-hidden":"true"}),Object(o.jsxs)("div",{className:"card_inner_admin",children:[Object(o.jsx)("p",{className:"text-primary-p",children:"Total Comments"}),Object(o.jsx)("span",{className:"font-bold text-title",children:t.total_comments})]})]}),Object(o.jsxs)("div",{className:"card_admin",children:[Object(o.jsx)("i",{className:"fa fa-camera fa-2x text-yellow","aria-hidden":"true"}),Object(o.jsxs)("div",{className:"card_inner_admin",children:[Object(o.jsx)("p",{className:"text-primary-p",children:"Total Posts"}),Object(o.jsx)("span",{className:"font-bold text-title",children:t.total_posts})]})]}),Object(o.jsxs)("div",{className:"card_admin",children:[Object(o.jsx)("i",{className:"fa fa-ban fa-2x text-red","aria-hidden":"true"}),Object(o.jsxs)("div",{className:"card_inner_admin",children:[Object(o.jsx)("p",{className:"text-primary-p",children:"Reported Posts"}),Object(o.jsx)("span",{className:"font-bold text-title",children:t.total_spam_posts})]})]}),Object(o.jsxs)("div",{className:"card_admin",children:[Object(o.jsx)("i",{className:"fa fa-thumbs-up fa-2x text-green","aria-hidden":"true"}),Object(o.jsxs)("div",{className:"card_inner_admin",children:[Object(o.jsx)("p",{className:"text-primary-p",children:"Total Likes"}),Object(o.jsx)("span",{className:"font-bold text-title",children:t.total_likes})]})]}),Object(o.jsxs)("div",{className:"card_admin",children:[Object(o.jsx)("i",{className:"fa fa-check-circle fa-2x  text-green","aria-hidden":"true"}),Object(o.jsxs)("div",{className:"card_inner_admin",children:[Object(o.jsx)("p",{className:"text-primary-p",children:"Total Active Users"}),Object(o.jsx)("span",{className:"font-bold text-title",children:t.total_active_users})]})]})]})]})})},d=s(13);var j=()=>{const{auth:e,alert:t}=Object(r.c)((e=>e)),s=Object(r.b)(),c=Object(d.f)(),l={fullname:"",username:"",email:"",password:"",cf_password:"",gender:"male"},[i,j]=Object(a.useState)(l),{fullname:m,username:u,email:b,password:p,cf_password:h}=i,[O,x]=Object(a.useState)(!1),[y,f]=Object(a.useState)(!1);Object(a.useEffect)((()=>{e.token&&c.push("/")}),[e.token,c]);const g=e=>{const{name:t,value:s}=e.target;j({...i,[t]:s})};return Object(o.jsx)("div",{className:"auth_page",children:Object(o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i.role="admin",s(Object(n.g)(i)),j(l)},className:"inner-shadow",children:[Object(o.jsx)("h3",{className:"text-uppercase text-center mb-4 auth-heading",children:"Campus Connect"}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"fullname",className:"form-label",children:"Full name"}),Object(o.jsx)("div",{className:"outer-shadow hover-in-shadow form-input-wrap",children:Object(o.jsx)("input",{type:"text",className:"form-control",id:"fullname",onChange:g,value:m,name:"fullname",style:{background:(t.fullname?"#fd2d6a14":"")+" "}})}),Object(o.jsx)("small",{className:"form-text text-danger",children:t.fullname?t.fullname:""})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"username",className:"form-label",children:"User name"}),Object(o.jsx)("div",{className:"outer-shadow hover-in-shadow form-input-wrap",children:Object(o.jsx)("input",{type:"text",className:"form-control",id:"username",onChange:g,value:u.toLowerCase().replace(/ /g,""),name:"username",style:{background:(t.username?"#fd2d6a14":"")+" "}})}),Object(o.jsx)("small",{className:"form-text text-danger",children:t.username?t.username:""})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email address"}),Object(o.jsx)("div",{className:"outer-shadow hover-in-shadow form-input-wrap",children:Object(o.jsx)("input",{type:"email",className:"form-control",id:"email","aria-describedby":"emailHelp",onChange:g,value:b,name:"email",style:{background:(t.email?"#fd2d6a14":"")+" "}})}),Object(o.jsx)("small",{className:"form-text text-danger",children:t.email?t.email:""})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),Object(o.jsx)("div",{className:"pass",children:Object(o.jsxs)("div",{className:"outer-shadow hover-in-shadow form-input-wrap",children:[Object(o.jsx)("input",{type:O?"text":"password",className:"form-control",id:"password",onChange:g,value:p,name:"password",style:{background:(t.password?"#fd2d6a14":"")+" "}}),Object(o.jsx)("small",{onClick:()=>x(!O),children:O?"Hide":"Show"})]})}),Object(o.jsx)("small",{className:"form-text text-danger",children:t.password?t.password:""})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"cf_password",className:"form-label",children:"Confirm Password"}),Object(o.jsx)("div",{className:"pass",children:Object(o.jsxs)("div",{className:"outer-shadow hover-in-shadow form-input-wrap",children:[Object(o.jsx)("input",{type:y?"text":"password",className:"form-control",id:"cf_password",onChange:g,value:h,name:"cf_password",style:{background:(t.cf_password?"#fd2d6a14":"")+" "}}),Object(o.jsx)("small",{onClick:()=>f(!y),children:y?"Hide":"Show"})]})}),Object(o.jsx)("small",{className:"form-text text-danger",children:t.cf_password?t.cf_password:""})]}),Object(o.jsxs)("div",{className:"d-flex justify-content-evenly  mx-0 mb-1",children:[Object(o.jsxs)("label",{htmlFor:"male",children:["Male:",Object(o.jsx)("input",{type:"radio",id:"male",name:"gender",value:"male",defaultChecked:!0,onChange:g})]}),Object(o.jsxs)("label",{htmlFor:"female",children:["Female:",Object(o.jsx)("input",{type:"radio",id:"female",name:"gender",value:"female",onChange:g})]})]}),Object(o.jsx)("button",{type:"submit",className:"btn-1 w-100 d-flex outer-shadow hover-in-shadow justify-content-center",children:"Register"})]})})};var m=()=>{const{auth:e}=Object(r.c)((e=>e));return Object(o.jsx)("div",{className:"main_admin",children:Object(o.jsxs)("div",{className:"main__container",children:[Object(o.jsx)("div",{className:"main__title",children:Object(o.jsxs)("div",{className:"main__greeting",children:[Object(o.jsxs)("h1",{children:["Hello ",e.user.username]}),Object(o.jsx)("p",{children:"Welcome to your Admin Management"})]})}),Object(o.jsx)(j,{})]})})},u=(s(312),s(23)),b=s(62),p=s.n(b);var h=e=>{let{content:t}=e;const{auth:s,socket:a}=Object(r.c)((e=>e)),c=Object(r.b)();return Object(o.jsx)("div",{children:t.length>0?t.map((e=>Object(o.jsxs)("div",{className:"admin_content_display",children:[Object(o.jsxs)("span",{className:"spam_report",children:["Reports: ",e.reports.length]}),Object(o.jsxs)("div",{className:"d-flex",children:[Object(o.jsx)(u.a,{size:"big-avatar",src:e.user.avatar}),Object(o.jsxs)("div",{className:"d-flex flex-column ms-3",children:[Object(o.jsx)("span",{className:"spam_username",children:e.user.username}),Object(o.jsx)("span",{className:"spam_email",children:e.user.email})]}),Object(o.jsxs)("span",{className:"spam_time text-muted",children:["~",p()(e.createdAt).fromNow()]})]}),Object(o.jsxs)("div",{className:"ms-auto d-flex flex-column ",style:{cursor:"pointer"},onClick:()=>(e=>{c(Object(l.b)({post:e,auth:s,socket:a}))})(e),children:[Object(o.jsx)("span",{className:"material-icons",children:"delete"}),"Remove"]})]}))):Object(o.jsx)("h1",{children:"Nothing to display"})})};var O=()=>{const{auth:e,admin:t}=Object(r.c)((e=>e)),s=Object(r.b)();return Object(a.useEffect)((()=>{s(Object(l.c)(e.token))}),[s,e.token]),Object(o.jsx)("div",{className:"main_admin",children:Object(o.jsxs)("div",{className:"main__container",children:[Object(o.jsx)("div",{className:"main__title",children:Object(o.jsxs)("div",{className:"main__greeting",children:[Object(o.jsxs)("h1",{children:["Hello ",e.user.username]}),Object(o.jsx)("p",{children:"Spam Dashboard"})]})}),Object(o.jsx)("div",{className:"spam",children:Object(o.jsx)(h,{content:t.spam_posts})})]})})};var x=()=>{const{auth:e}=Object(r.c)((e=>e));return Object(o.jsx)("div",{className:"main_admin",children:Object(o.jsx)("div",{className:"main__container",children:Object(o.jsx)("div",{className:"main__title",children:Object(o.jsxs)("div",{className:"main__greeting",children:[Object(o.jsxs)("h1",{children:["Hello ",e.user.username]}),Object(o.jsx)("p",{children:"Welcome to your Admin Dashboard"})]})})})})};var y=()=>{const e=Object(r.b)(),[t,s]=Object(a.useState)(1);return Object(o.jsxs)(o.Fragment,{children:[1===t&&Object(o.jsx)(i,{}),2===t&&Object(o.jsx)(m,{}),3===t&&Object(o.jsx)(O,{}),4===t&&Object(o.jsx)(x,{}),Object(o.jsxs)("div",{className:"sidebar_responsive",id:"sidebar",children:[Object(o.jsxs)("div",{className:"sidebar__title",children:[Object(o.jsx)("div",{className:"sidebar__img",children:Object(o.jsx)("h1",{children:"Socialgram"})}),Object(o.jsx)("i",{className:"fa fa-times",id:"sidebarIcon","aria-hidden":"true"})]}),Object(o.jsxs)("div",{className:"sidebar__menu",children:[Object(o.jsxs)("div",{className:`sidebar__link ${1===t&&"active_menu_link"}`,onClick:()=>s(1),children:[Object(o.jsx)("i",{className:"fa fa-th"}),Object(o.jsx)("a",{href:"#",children:"Dashboard"})]}),Object(o.jsx)("h2",{children:"ADMIN CONTROL"}),Object(o.jsxs)("div",{className:`sidebar__link ${2===t&&"active_menu_link"}`,onClick:()=>s(2),children:[Object(o.jsx)("i",{className:"fa fa-lock","aria-hidden":"true"}),Object(o.jsx)("a",{href:"#",children:"Admin Management"})]}),Object(o.jsxs)("div",{className:`sidebar__link ${3===t&&"active_menu_link"}`,onClick:()=>s(3),children:[Object(o.jsx)("i",{className:"fa fa-ban"}),Object(o.jsx)("a",{href:"#",children:"Spams Management"})]}),Object(o.jsxs)("div",{className:`sidebar__link ${4===t&&"active_menu_link"}`,onClick:()=>s(4),children:[Object(o.jsx)("i",{className:"fa fa-wrench"}),Object(o.jsx)("a",{href:"#",children:"Users Management"})]}),Object(o.jsxs)("div",{className:"sidebar__link",children:[Object(o.jsx)("i",{className:"fa fa-archive"}),Object(o.jsx)("a",{href:"#",children:"xyz"})]}),Object(o.jsxs)("div",{className:"sidebar__link",children:[Object(o.jsx)("i",{className:"fa fa-handshake-o"}),Object(o.jsx)("a",{href:"#",children:"xyz"})]}),Object(o.jsxs)("div",{className:"sidebar__logout",children:[Object(o.jsx)("i",{className:"fa fa-power-off"}),Object(o.jsx)(c.b,{to:"/",onClick:()=>e(Object(n.d)()),children:"Log out"})]})]})]})]})};t.default=()=>Object(o.jsx)("div",{className:"container1",children:Object(o.jsx)(y,{})})},116:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s(4),r=s(120),n=s(18),l=s(63),o=s(5),i=s(7),d=s(0);var j=()=>{const{homePosts:e,auth:t,theme:s}=Object(c.c)((e=>e)),j=Object(c.b)(),[m,u]=Object(a.useState)(!1);return Object(d.jsxs)("div",{className:"posts",children:[e.posts.map((e=>Object(d.jsx)(r.a,{post:e,theme:s},e._id))),m&&Object(d.jsx)("img",{src:n.a,alt:"Loading...",className:"d-block mx-auto"}),Object(d.jsx)(l.a,{result:e.result,page:e.page,load:m,handleLoadMore:async()=>{u(!0);const s=await Object(o.b)("posts?limit="+9*e.page,t.token);j({type:i.a.GET_POSTS,payload:{...s.data,page:e.page+1}}),u(!1)}})]})},m=s(23),u=s(2);var b=()=>{const{auth:e}=Object(c.c)((e=>e)),t=Object(c.b)();return Object(d.jsxs)("div",{className:"status my-3 d-flex",children:[Object(d.jsx)("div",{className:"outer-shadow big-avatar-cover",children:Object(d.jsx)(m.a,{src:e.user.avatar,size:"big-avatar",className:""})}),Object(d.jsx)("button",{onClick:()=>t({type:u.c.STATUS,payload:!0}),className:"btn-1 outer-shadow hover-in-shadow statusBtn flex-fill ",style:{marginLeft:"7px"},children:Object(d.jsxs)("span",{style:{textShadow:"var(--outer-shadow)"},children:[e.user.username,", What's on your mind?"]})})]})},p=s(37),h=s(58),O=s(59);var x=()=>{const{auth:e,suggestions:t}=Object(c.c)((e=>e)),s=Object(c.b)();return Object(d.jsxs)("div",{className:"my-4",children:[Object(d.jsx)("div",{className:"inner-shadow",style:{borderRadius:"5px"},children:Object(d.jsx)(p.a,{user:e.user})}),Object(d.jsxs)("div",{className:"d-flex justify-content-between align-items-center my-2",children:[Object(d.jsx)("h5",{className:"color-c1",style:{textShadow:"var(--outer-shadow)"},children:"Suggestions"}),!t.loading&&Object(d.jsx)("div",{className:"outer-shadow hover-in-shadow btn-1 d-flex justify-content-center align-items-center",children:Object(d.jsx)("i",{className:"fas fa-redo ",style:{cursor:"pointer"},onClick:()=>s(Object(O.b)(e.token))})})]}),t.loading?Object(d.jsx)("img",{src:n.a,alt:"Loading...",className:"d-block mx-auto my-4"}):Object(d.jsx)("div",{className:"suggestions",children:t.users.map((e=>Object(d.jsx)("div",{className:" mb-3 inner-shadow",style:{borderRadius:"5px"},children:Object(d.jsx)(p.a,{user:e,children:Object(d.jsx)(h.a,{user:e},e._id)},e._id)},e._id)))})]})};t.default=()=>{const{homePosts:e}=Object(c.c)((e=>e));return Object(d.jsxs)("div",{className:"home row mx-0",children:[Object(d.jsxs)("div",{className:"col-md-8",children:[Object(d.jsx)(b,{}),e.loading?Object(d.jsx)("img",{src:n.a,alt:"loading",className:"d-block mx-auto"}):0===e.result?Object(d.jsx)("h2",{className:"text-center",children:"No Post"}):Object(d.jsx)(j,{})]}),Object(d.jsx)("div",{className:"col-md-4",children:Object(d.jsx)(x,{})})]})}},119:function(e,t,s){"use strict";var a=s(1),c=s(4),r=s(13),n=s(2),l=s(31),o=s(5),i=s(37),d=s(0);t.a=()=>{const{auth:e,message:t}=Object(c.c)((e=>e)),s=Object(c.b)(),j=Object(r.f)(),{id:m}=Object(r.h)(),u=Object(a.useRef)(),[b,p]=Object(a.useState)(0),[h,O]=Object(a.useState)(""),[x,y]=Object(a.useState)([]),f=e=>(O(""),y([]),s(Object(l.c)({user:e,message:t})),j.push(`/message/${e._id}`)),g=e=>m===e._id?"active":"";return Object(a.useEffect)((()=>{t.firstLoad||s(Object(l.d)({auth:e}))}),[s,e,t.firstLoad]),Object(a.useEffect)((()=>{new IntersectionObserver((e=>{e[0].isIntersecting&&p((e=>e+1))}),{threshold:.1}).observe(u.current)}),[p]),Object(a.useEffect)((()=>{t.resultUsers>=9*(b-1)&&b>1&&s(Object(l.d)({auth:e,page:b}))}),[t.resultUsers,b,e,s]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("form",{className:"message_header",onSubmit:async t=>{if(t.preventDefault(),!h)return y([]);try{const t=await Object(o.b)(`search?username=${h}`,e.token);y(t.data.users)}catch(a){s({type:n.c.ALERT,payload:{error:a.response.data.msg}})}},children:[Object(d.jsx)("input",{type:"text",value:h,onChange:e=>O(e.target.value),placeholder:"search..."}),Object(d.jsx)("button",{style:{display:"none"},type:"submit",id:"search",children:"Search"})]}),Object(d.jsxs)("div",{className:"message_chat_list",children:[0!==x.length?Object(d.jsx)(d.Fragment,{children:x.map((e=>Object(d.jsx)("div",{className:`message_user ${g(e)}`,onClick:()=>f(e),children:Object(d.jsx)(i.a,{user:e})},e._id)))}):Object(d.jsx)(d.Fragment,{children:t.users.map((e=>Object(d.jsx)("div",{cclassName:`message_user ${g(e)}`,onClick:()=>f(e),children:Object(d.jsx)(i.a,{user:e,msg:!0,children:Object(d.jsx)("i",{className:"fas fa-circle"})})},e._id)))}),Object(d.jsx)("button",{style:{opacity:0},ref:u,children:"Load more.."})]})]})}},120:function(e,t,s){"use strict";var a=s(1),c=s(4),r=s(0);var n=e=>{let{images:t,id:s}=e;const{theme:a}=Object(c.c)((e=>e)),n=e=>{if(0===e)return"active"};return Object(r.jsxs)("div",{id:`image${s}`,className:"carousel slide","data-bs-ride":"carousel",children:[Object(r.jsx)("div",{className:"carousel-indicators",children:t.map(((e,t)=>Object(r.jsx)("button",{type:"button","data-bs-target":`#image${s}`,"data-bs-slide-to":t,className:n(t),"aria-current":"true"},t)))}),Object(r.jsx)("div",{className:"carousel-inner",children:t.map(((e,t)=>{var s;return Object(r.jsx)("div",{className:`carousel-item ${n(t)}`,children:null!==e&&void 0!==e&&null!==(s=e.url)&&void 0!==s&&s.match(/video/i)?Object(r.jsx)("video",{controls:!0,style:{filter:a?"invert(1)":"invert(0)"},src:e.url,className:"d-block w-100",alt:e.url}):Object(r.jsx)("img",{style:{filter:a?"invert(1)":"invert(0)"},src:e.url,className:"d-block w-100",alt:e.url})},t)}))}),Object(r.jsxs)("button",{style:{width:"5%"},className:"carousel-control-prev",type:"button","data-bs-target":`#image${s}`,"data-bs-slide":"prev",children:[Object(r.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),Object(r.jsx)("span",{className:"visually-hidden",children:"Previous"})]}),Object(r.jsxs)("button",{style:{width:"5%"},className:"carousel-control-next",type:"button","data-bs-target":`#image${s}`,"data-bs-slide":"next",children:[Object(r.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),Object(r.jsx)("span",{className:"visually-hidden",children:"Next"})]})]})};var l=e=>{let{post:t,theme:s}=e;const[c,l]=Object(a.useState)();return Object(r.jsxs)("div",{className:"card_body",children:[Object(r.jsxs)("div",{className:"card_body-content",style:{filter:s?"invert(1)":"invert(0)",color:s?"white":"#111"},children:[Object(r.jsx)("span",{children:t.content.length<60?t.content:c?t.content+" ":t.content.slice(0,60)+"  ..."}),t.content.length>60&&Object(r.jsx)("span",{className:"readMore",onClick:()=>l(!c),children:c?"Hide Content":"Read More"})]}),t.images.length>0&&Object(r.jsx)(n,{images:t.images,id:t._id})]})},o=s(9);var i=e=>{let{isLike:t,handleLike:s,handleUnLike:a}=e;const{theme:n}=Object(c.c)((e=>e));return Object(r.jsx)("div",{children:t?Object(r.jsx)("i",{className:"fas fa-thumbs-up text-info",style:{filter:n?"invert(1)":"invert(0)"},onClick:a}):Object(r.jsx)("i",{className:"far fa-thumbs-up",onClick:s})})},d=s(7),j=s(588),m=s(589),u=s(590),b=s(591),p=s(592),h=s(593),O=s(594),x=s(595),y=s(596),f=s(597),g=s(598),v=s(599),_=s(600),N=s(601),T=s(602),w=s(603);var E=e=>{let{url:t,theme:s,setIsShare:a}=e;return Object(r.jsx)("div",{className:"share_modal",children:Object(r.jsxs)("div",{className:"share_modal-container",children:[Object(r.jsxs)("div",{className:"share_modal-header",children:[Object(r.jsx)("span",{children:"Share to..."}),Object(r.jsx)("span",{onClick:()=>a(!1),children:"\xd7"})]}),Object(r.jsxs)("div",{className:" share_modal-body",style:{filter:s?"invert(1)":"invert(0)"},children:[Object(r.jsx)(j.a,{url:t,children:Object(r.jsx)(m.a,{round:!0,size:32})}),Object(r.jsx)(u.a,{url:t,children:Object(r.jsx)(b.a,{round:!0,size:32})}),Object(r.jsx)(p.a,{url:t,children:Object(r.jsx)(h.a,{round:!0,size:32})}),Object(r.jsx)(O.a,{url:t,children:Object(r.jsx)(x.a,{round:!0,size:32})}),Object(r.jsx)(y.a,{url:t,children:Object(r.jsx)(f.a,{round:!0,size:32})}),Object(r.jsx)(g.a,{url:t,children:Object(r.jsx)(v.a,{round:!0,size:32})}),Object(r.jsx)(_.a,{url:t,children:Object(r.jsx)(N.a,{round:!0,size:32})}),Object(r.jsx)(T.a,{url:t,children:Object(r.jsx)(w.a,{round:!0,size:32})})]})]})})};var S=e=>{let{post:t}=e;const[s,n]=Object(a.useState)(!1),[l,j]=Object(a.useState)(!1),[m,u]=Object(a.useState)(!1),[b,p]=Object(a.useState)(!1),[h,O]=Object(a.useState)(!1),x=Object(c.b)(),{auth:y,theme:f,socket:g}=Object(c.c)((e=>e));Object(a.useEffect)((()=>{t.likes.find((e=>e._id===y.user._id))?n(!0):n(!1)}),[t.likes,y.user._id]);return Object(a.useEffect)((()=>{y.user.saved.find((e=>e===t._id))?j(!0):j(!1)}),[t._id,y.user.saved]),Object(r.jsxs)("div",{className:"card_footer",children:[Object(r.jsxs)("div",{className:"card_icon_menu",children:[Object(r.jsxs)("div",{className:"d-flex",children:[Object(r.jsx)(i,{isLike:s,handleLike:async()=>{m||(u(!0),await x(Object(d.f)({post:t,auth:y,socket:g})),u(!1))},handleUnLike:async()=>{m||(u(!0),await x(Object(d.i)({post:t,auth:y,socket:g})),u(!1))}}),Object(r.jsx)(o.b,{to:`/post/${t._id}`,className:"text-dark",children:Object(r.jsx)("i",{className:"far fa-comments"})}),Object(r.jsx)("i",{className:"fa fa-share",alt:"Send",onClick:()=>O(!h)})]}),l?Object(r.jsx)("i",{className:"fas text-info fa-bookmark",onClick:async()=>{b||(p(!0),await x(Object(d.j)({post:t,auth:y})),p(!1))}}):Object(r.jsx)("i",{className:"far fa-bookmark",onClick:async()=>{b||(p(!0),await x(Object(d.h)({post:t,auth:y})),p(!1))}})]}),Object(r.jsxs)("div",{className:"d-flex justify-content-start",children:[Object(r.jsxs)("h6",{style:{padding:"0 25px",cursor:"pointer"},children:[t.likes.length," likes"]}),Object(r.jsxs)("h6",{style:{padding:"0 25px",cursor:"pointer"},children:[t.comments.length," comments"]})]}),h&&Object(r.jsx)(E,{url:"http://google.com",theme:f,setIsShare:O})]})},k=s(23),A=s(13),L=s(62),P=s.n(L);var C=s(2);var R=e=>{let{post:t}=e;const{auth:s,socket:a}=Object(c.c)((e=>e)),n=Object(c.b)(),l=Object(A.f)();return Object(r.jsxs)("div",{className:"card_header",children:[Object(r.jsxs)("div",{className:"d-flex",children:[Object(r.jsx)("div",{className:"outer-shadow big-avatar-cover me-2",children:Object(r.jsx)(k.a,{src:t.user.avatar,size:"big-avatar"})}),Object(r.jsxs)("div",{className:"card_name",children:[Object(r.jsx)("h6",{className:"m-0",children:Object(r.jsx)(o.b,{className:"text-dark",to:`/profile/${t.user._id}`,children:t.user.username})}),Object(r.jsx)("small",{className:"text-muted",children:P()(t.createdAt).fromNow()})]})]}),Object(r.jsxs)("div",{className:"nav-item dropdown",children:[Object(r.jsx)("span",{className:"material-icons",id:"moreLink","data-bs-toggle":"dropdown",children:"more_horiz"}),Object(r.jsxs)("div",{className:"dropdown-menu",children:[s.user._id===t.user._id&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"dropdown-item",onClick:()=>{n({type:C.c.STATUS,payload:{...t,onEdit:!0}})},children:[Object(r.jsx)("span",{className:"material-icons text-info",children:" create"}),"Edit Post"]}),Object(r.jsxs)("div",{className:"dropdown-item",onClick:()=>{if(window.confirm("Are you sure?"))return n(Object(d.c)({post:t,auth:s,socket:a})),l.push("/")},children:[Object(r.jsx)("span",{className:"material-icons text-red",children:" delete"}),"Delete Post"]})]}),Object(r.jsxs)("div",{className:"dropdown-item",onClick:()=>{navigator.clipboard.writeText(`https://social-gram-backend-ovlj.onrender.com/post/${t._id}`)},children:[Object(r.jsx)("span",{className:"material-icons text-primary",children:"content_copy"}),"Copy Link"]}),Object(r.jsxs)("div",{className:"dropdown-item",onClick:()=>{n(Object(d.g)({post:t,auth:s}))},children:[Object(r.jsx)("span",{className:"material-icons text-yellow",children:"report_problem"}),"Report this post"]})]})]})]})},D=s(11),I=s(5);var U=e=>{let{post:t,comment:s,setOnEdit:a}=e;const{auth:n,socket:l}=Object(c.c)((e=>e)),o=Object(c.b)(),i=()=>{t.user._id!==n.user._id&&s.user._id!==n.user._id||o((e=>{let{post:t,comment:s,auth:a,socket:c}=e;return async e=>{const r=[...t.comments.filter((e=>e.reply===s._id)),s],n={...t,comments:t.comments.filter((e=>!r.find((t=>e._id===t._id))))};e({type:d.a.UPDATE_POST,payload:n}),c.emit("deleteComment",n);try{r.forEach((s=>{Object(I.a)(`comment/${s._id}`,a.token);const r={id:s._id,text:s.reply?"mentioned you in a comment.":"commented on your post.",recipients:s.reply?[s.tag._id]:[t.user._id],url:`/post/${t._id}`};e(Object(D.f)({msg:r,auth:a,socket:c}))}))}catch(l){e({type:C.c.ALERT,payload:{error:l.response.data.msg}})}}})({post:t,auth:n,comment:s,socket:l}))},j=()=>Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"dropdown-item",onClick:()=>a(!0),children:[Object(r.jsx)("span",{className:"material-icons text-primary",children:"create"})," Edit"]}),Object(r.jsxs)("div",{className:"dropdown-item",onClick:i,children:[Object(r.jsx)("span",{className:"material-icons text-red",children:"delete_outline"})," Delete"]})]});return Object(r.jsx)("div",{className:"menu",children:(t.user._id===n.user._id||s.user._id===n.user._id)&&Object(r.jsxs)("div",{className:"nav-item dropdown",children:[Object(r.jsx)("span",{className:"material-icons",id:"moreLink","data-bs-toggle":"dropdown",children:"more_vert"}),Object(r.jsx)("div",{className:"dropdown-menu","aria-labelledby":"moreLink",children:t.user._id===n.user._id?s.user._id===n.user._id?j():Object(r.jsxs)("div",{className:"dropdown-item",onClick:i,children:[Object(r.jsx)("span",{className:"material-icons",children:"delete_outline"})," Delete"]}):s.user._id===n.user._id&&j()})]})})},G=s(78);var F=e=>{let{children:t,post:s,onReply:n,setOnReply:l}=e;const[o,i]=Object(a.useState)(""),{auth:j,socket:m,theme:u}=Object(c.c)((e=>e)),b=Object(c.b)();return Object(r.jsxs)("form",{className:"card-footer comment_input",onSubmit:e=>{if(e.preventDefault(),!o.trim())return l?l(!1):void 0;i("");const t={content:o,likes:[],user:j.user,createdAt:(new Date).toISOString(),reply:n&&n.commentId,tag:n&&n.user};return b((e=>{let{post:t,newComment:s,auth:a,socket:c}=e;return async e=>{const r={...t,comments:[...t.comments,s]};e({type:d.a.UPDATE_POST,payload:r});try{const r={...s,postId:t._id,postUserId:t.user._id},n=await Object(I.d)("comment",r,a.token),l={...n.data.newComment,user:a.user},o={...t,comments:[...t.comments,l]};e({type:d.a.UPDATE_POST,payload:o}),c.emit("createComment",o);const i={id:n.data.newComment._id,text:s.reply?"mentioned you in a comment.":"commented on your post.",recipients:s.reply?[s.tag._id]:[t.user._id],url:`/post/${t._id}`,content:s.reply?s.content:t.content,image:t.images[0].url};e(Object(D.b)({msg:i,auth:a,socket:c}))}catch(n){e({type:C.c.ALERT,payload:{error:n.response.data.msg}})}}})({post:s,newComment:t,auth:j,socket:m})),l?l(!1):void 0},children:[t,Object(r.jsx)("input",{type:"text",placeholder:"Add comments...",value:o,onChange:e=>i(e.target.value),style:{filter:u?"invert(1)":"invert(0)",color:u?"white":"#111",background:u?"rgb(0,0,0,0.3)":""}}),Object(r.jsx)(G.a,{setContent:i,content:o,theme:u}),Object(r.jsx)("button",{type:"submit",className:"postBtn",children:"Post"})]})};var M=e=>{let{children:t,comment:s,post:n,commentId:l}=e;const{auth:j,theme:m}=Object(c.c)((e=>e)),u=Object(c.b)(),[b,p]=Object(a.useState)(""),[h,O]=Object(a.useState)(!1),[x,y]=Object(a.useState)(!1),[f,g]=Object(a.useState)(!1),[v,_]=Object(a.useState)(!1),[N,T]=Object(a.useState)(!1);Object(a.useEffect)((()=>{p(s.content),y(!1),T(!1),s.likes.find((e=>e._id===j.user._id))&&y(!0)}),[s,j.user._id]);const w={opacity:s._id?1:.5,pointerEvents:s._id?"inherit":"none"};return Object(r.jsxs)("div",{className:"comment_card mt-2",style:w,children:[Object(r.jsxs)(o.b,{to:`/profile/${s.user._id}`,className:"d-flex text-dark",children:[Object(r.jsx)(k.a,{src:s.user.avatar,size:"small-avatar"}),Object(r.jsx)("h6",{className:"mx-1",children:s.user.username})]}),Object(r.jsxs)("div",{className:"comment_content",children:[Object(r.jsxs)("div",{className:"flex-fill",style:{filter:m?"invert(1)":"invert(0)",color:m?"white":"#111"},children:[v?Object(r.jsx)("textarea",{rows:"5",value:b,onChange:e=>p(e.target.value)}):Object(r.jsxs)("div",{children:[s.tag&&s.tag._id!==s.user._id&&Object(r.jsxs)(o.b,{to:`/profile/${s.tag._id}`,style:{textDecoration:"none"},className:"me-1",children:["@",s.tag.username]}),Object(r.jsx)("span",{children:b.length<100?b:h?b+" ":b.slice(0,100)+"..."}),b.length>100&&Object(r.jsx)("span",{className:"readMore",onClick:()=>O(!h),children:h?"Hide ":"Read more"})]}),Object(r.jsxs)("div",{style:{cursor:"pointer"},children:[Object(r.jsx)("small",{className:"text-muted",style:{marginRight:"9px"},children:P()(s.createdAt).fromNow()}),Object(r.jsxs)("small",{style:{fontWeight:"bold",marginRight:"9px"},className:"mr3",children:[s.likes.length," likes"]}),v?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("small",{onClick:()=>{s.content!==b?(u((e=>{let{comment:t,post:s,content:a,auth:c}=e;return async e=>{const r=Object(C.b)(s.comments,t._id,{...t,content:a}),n={...s,comments:r};e({type:d.a.UPDATE_POST,payload:n});try{await Object(I.c)(`comment/${t._id}`,{content:a},c.token)}catch(l){e({type:C.c.ALERT,payload:{error:l.response.data.msg}})}}})({comment:s,post:n,content:b,auth:j})),_(!1)):_(!1)},style:{fontWeight:"bold",marginRight:"9px"},className:"mr3",children:"update"}),Object(r.jsx)("small",{onClick:()=>_(!1),style:{fontWeight:"bold",marginRight:"9px"},className:"mr3",children:"cancel"})]}):Object(r.jsx)("small",{style:{fontWeight:"bold",marginRight:"9px"},className:"mr3",onClick:()=>{if(N)return T(!1);T({...s,commentId:l})},children:N?"cancel":"reply"})]})]}),Object(r.jsxs)("div",{className:"d-flex align-items-center ",style:{cursor:"pointer"},children:[Object(r.jsx)(U,{post:n,comment:s,setOnEdit:_}),Object(r.jsx)(i,{isLike:x,handleLike:async()=>{f||(y(!0),g(!0),await u((e=>{let{comment:t,post:s,auth:a}=e;return async e=>{const c={...t,likes:[...t.likes,a.user]},r=Object(C.b)(s.comments,t._id,c),n={...s,comments:r};e({type:d.a.UPDATE_POST,payload:n});try{await Object(I.c)(`comment/${t._id}/like`,null,a.token)}catch(l){e({type:C.c.ALERT,payload:{error:l.response.data.msg}})}}})({comment:s,post:n,auth:j})),g(!1))},handleUnLike:async()=>{f||(y(!1),g(!0),await u((e=>{let{comment:t,post:s,auth:a}=e;return async e=>{const c={...t,likes:Object(C.a)(t.likes,a.user._id)},r=Object(C.b)(s.comments,t._id,c),n={...s,comments:r};e({type:d.a.UPDATE_POST,payload:n});try{await Object(I.c)(`comment/${t._id}/unlike`,null,a.token)}catch(l){e({type:C.c.ALERT,payload:{error:l.response.data.msg}})}}})({comment:s,post:n,auth:j})),g(!1))}})]})]}),N&&Object(r.jsx)(F,{post:n,onReply:N,setOnReply:T,children:Object(r.jsxs)(o.b,{style:{textDecoration:"none"},className:"mr-1",to:`/profile/${N.user._id}`,children:["@",N.user.username]})}),t]})};var $=e=>{let{comment:t,post:s,replyCm:c}=e;const[n,l]=Object(a.useState)([]),[o,i]=Object(a.useState)(1);return Object(a.useEffect)((()=>{l(c.slice(c.length-o))}),[c,o]),Object(r.jsx)("div",{className:"comment_display",children:Object(r.jsx)(M,{post:s,comment:t,commentId:t._id,children:Object(r.jsxs)("div",{className:"ps-4",children:[n.map(((e,a)=>e.reply&&Object(r.jsx)(M,{comment:e,post:s,commentId:t._id},a))),c.length-o>0?Object(r.jsx)("div",{onClick:()=>i(o+10),style:{cursor:"pointer",color:"crimson"},children:"Load more..."}):c.length>1&&Object(r.jsx)("div",{onClick:()=>i(1),style:{cursor:"pointer",color:"crimson"},children:"Hide..."})]})})})};var z=e=>{let{post:t}=e;const[s,c]=Object(a.useState)([]),[n,l]=Object(a.useState)([]),[o,i]=Object(a.useState)(2),[d,j]=Object(a.useState)([]);return Object(a.useEffect)((()=>{const e=t.comments.filter((e=>!e.reply));c(e),l(e.slice(e.length-o))}),[t.comments,o]),Object(a.useEffect)((()=>{const e=t.comments.filter((e=>e.reply));j(e)}),[t.comments]),Object(r.jsxs)("div",{className:"comments",children:[n.map(((e,s)=>Object(r.jsx)($,{comment:e,post:t,replyCm:d.filter((t=>t.reply===e._id))},s))),s.length-o>0?Object(r.jsx)("div",{onClick:()=>i(o+10),className:"p-2 border-top",style:{cursor:"pointer",color:"crimson"},children:"Load more..."}):s.length>2&&Object(r.jsx)("div",{onClick:()=>i(2),className:"p-2 border-top",style:{cursor:"pointer",color:"crimson"},children:"Hide..."})]})};t.a=e=>{let{post:t,theme:s}=e;return Object(r.jsxs)("div",{className:"card my-3 outer-shadow",children:[Object(r.jsx)(R,{post:t}),Object(r.jsx)(l,{post:t,theme:s}),Object(r.jsx)(S,{post:t}),Object(r.jsx)(z,{post:t}),Object(r.jsx)(F,{post:t})]})}},123:function(e,t,s){},15:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"i",(function(){return l})),s.d(t,"g",(function(){return o})),s.d(t,"e",(function(){return i})),s.d(t,"f",(function(){return d})),s.d(t,"h",(function(){return j})),s.d(t,"c",(function(){return m})),s.d(t,"b",(function(){return u})),s.d(t,"d",(function(){return b}));var a=s(2),c=s(5),r=s(11);const n={GET_TOTAL_USERS:"GET_TOTAL_USERS",GET_TOTAL_POSTS:"GET_TOTAL_POSTS",GET_TOTAL_COMMENTS:"GET_TOTAL_COMMENTS",GET_TOTAL_LIKES:"GET_TOTAL_LIKES",GET_TOTAL_SPAM_POSTS:"GET_TOTAL_SPAM_POSTS",GET_TOTAL_ACTIVE_USERS:"GET_TOTAL_ACTIVE_USERS",GET_SPAM_POSTS:"GET_SPAM_POSTS",LOADING_ADMIN:"LOADING_ADMIN",DELETE_POST:"DELETE_POST"},l=e=>async t=>{try{t({type:n.LOADING_ADMIN,payload:!0});const s=await Object(c.b)("get_total_users",e);t({type:n.GET_TOTAL_USERS,payload:s.data}),t({type:n.LOADING_ADMIN,payload:!1})}catch(s){t({type:a.c.ALERT,payload:{error:s.response.data.msg}})}},o=e=>async t=>{try{t({type:n.LOADING_ADMIN,payload:!0});const s=await Object(c.b)("get_total_posts",e);t({type:n.GET_TOTAL_POSTS,payload:s.data}),t({type:n.LOADING_ADMIN,payload:!1})}catch(s){t({type:a.c.ALERT,payload:{error:s.response.data.msg}})}},i=e=>async t=>{try{t({type:n.LOADING_ADMIN,payload:!0});const s=await Object(c.b)("get_total_comments",e);t({type:n.GET_TOTAL_COMMENTS,payload:s.data}),t({type:n.LOADING_ADMIN,payload:!1})}catch(s){t({type:a.c.ALERT,payload:{error:s.response.data.msg}})}},d=e=>async t=>{try{t({type:n.LOADING_ADMIN,payload:!0});const s=await Object(c.b)("get_total_likes",e);t({type:n.GET_TOTAL_LIKES,payload:s.data}),t({type:n.LOADING_ADMIN,payload:!1})}catch(s){t({type:a.c.ALERT,payload:{error:s.response.data.msg}})}},j=e=>async t=>{try{t({type:n.LOADING_ADMIN,payload:!0});const s=await Object(c.b)("get_total_spam_posts",e);t({type:n.GET_TOTAL_SPAM_POSTS,payload:s.data}),t({type:n.LOADING_ADMIN,payload:!1})}catch(s){t({type:a.c.ALERT,payload:{error:s.response.data.msg}})}},m=e=>async t=>{try{t({type:n.LOADING_ADMIN,payload:!0});const s=await Object(c.b)("get_spam_posts",e);t({type:n.GET_SPAM_POSTS,payload:s.data.spamPosts}),t({type:n.LOADING_ADMIN,payload:!1})}catch(s){t({type:a.c.ALERT,payload:{error:s.response.data.msg}})}},u=e=>{let{post:t,auth:s,socket:l}=e;return async e=>{e({type:n.DELETE_POST,payload:t});try{const n=await Object(c.a)(`delete_spam_posts/${t._id}`,s.token);e({type:a.c.ALERT,payload:{success:n.data.msg}});const o={id:s.user._id,text:"Your Post is deleted due to too many reports.",recipients:[t.user._id],url:`/profile/${t.user._id}`};e(Object(r.b)({msg:o,auth:s,socket:l}))}catch(o){e({type:a.c.ALERT,payload:{error:o.response.data.msg}})}}},b=e=>{let{auth:t,socket:s}=e;return async e=>{try{s.emit("getActiveUsers",t.user._id)}catch(c){e({type:a.c.ALERT,payload:{error:c.response.data.msg}})}}}},176:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s(4),r=s(68),n=s(18),l=s(77),o=s(63),i=s(5),d=s(0);t.default=()=>{const{auth:e,discover:t}=Object(c.c)((e=>e)),s=Object(c.b)(),[j,m]=Object(a.useState)(!1);Object(a.useEffect)((()=>{t.firstLoad||s(Object(r.b)(e.token))}),[s,e.token,t.firstLoad]);return Object(d.jsxs)("div",{children:[t.loading?Object(d.jsx)("img",{src:n.a,alt:"Loading...",className:"d-block mx-auto my-4"}):Object(d.jsx)(l.a,{posts:t.posts,result:t.result}),j&&Object(d.jsx)("img",{src:n.a,alt:"Loading...",className:"d-block mx-auto"}),!t.loading&&Object(d.jsx)(o.a,{result:t.result,page:t.page,load:j,handleLoadMore:async()=>{m(!0);const a=await Object(i.b)("post_discover?num="+8*t.page,e.token);s({type:r.a.UPDATE_POSTS,payload:a.data}),m(!1)}})]})}},18:function(e,t,s){"use strict";t.a=s.p+"static/media/loading.10625dac.gif"},2:function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return r}));const a={AUTH:"AUTH",ALERT:"ALERT",THEME:"THEME",STATUS:"STATUS",MODAL:"MODAL",USER_TYPE:"USER_TYPE",SOCKET:"SOCKET"},c=(e,t,s)=>e.map((e=>e._id===t?s:e)),r=(e,t)=>e.filter((e=>e._id!==t))},23:function(e,t,s){"use strict";s(1);var a=s(4),c=s(0);t.a=e=>{let{src:t,size:s}=e;const{theme:r}=Object(a.c)((e=>e));return Object(c.jsx)("img",{src:t,alt:"Avatar",className:s,style:{filter:""+(r?"invert(1)":"invert(0)")}})}},26:function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"c",(function(){return o})),s.d(t,"e",(function(){return i})),s.d(t,"b",(function(){return d})),s.d(t,"d",(function(){return j}));var a=s(2),c=s(5),r=s(55),n=s(11);const l={LOADING:"LOADING_PROFILE",GET_USER:"GET_PROFILE_USER",FOLLOW:"FOLLOW",UNFOLLOW:"UNFOLLOW",GET_ID:"GET_PROFILE_ID",GET_POSTS:"GET_PROFILE_POSTS",UPDATE_POST:"UPDATE_PROFILE_POSTS"},o=e=>{let{id:t,auth:s}=e;return async e=>{e({type:l.GET_ID,payload:t});try{e({type:l.LOADING,payload:!0});const a=Object(c.b)(`/user/${t}`,s.token),r=Object(c.b)(`/user_posts/${t}`,s.token),n=await a,o=await r;e({type:l.GET_USER,payload:n.data}),e({type:l.GET_POSTS,payload:{...o.data,_id:t,page:2}}),e({type:l.LOADING,payload:!1})}catch(r){e({type:a.c.ALERT,payload:{error:r.response.data.msg}})}}},i=e=>{let{userData:t,avatar:s,auth:n}=e;return async e=>{if(!t.fullname)return e({type:a.c.ALERT,payload:{error:"Please enter full name."}});if(t.fullname.length>25)return e({type:a.c.ALERT,payload:{error:"Full name is too long."}});if(t.story.length>200)return e({type:a.c.ALERT,payload:{error:"Story is too long."}});try{let l;e({type:a.c.ALERT,payload:{loading:!0}}),s&&(l=await Object(r.b)([s]));const o=await Object(c.c)("user",{...t,avatar:s?l[0].url:n.user.avatar},n.token);e({type:a.c.AUTH,payload:{...n,user:{...n.user,...t,avatar:s?l[0].url:n.user.avatar}}}),e({type:a.c.ALERT,payload:{success:o.data.msg}})}catch(l){e({type:a.c.ALERT,payload:{error:l.response.data.msg}})}}},d=e=>{let{users:t,user:s,auth:r,socket:o}=e;return async e=>{let i;t.every((e=>e._id!==s._id))?i={...s,followers:[...s.followers,r.user]}:t.forEach((e=>{e._id===s._id&&(i={...e,followers:[...e.followers,r.user]})})),e({type:l.FOLLOW,payload:i}),e({type:a.c.AUTH,payload:{...r,user:{...r.user,following:[...r.user.following,i]}}});try{const t=await Object(c.c)(`/user/${s._id}/follow`,null,r.token);o.emit("follow",t.data.newUser);const a={id:r.user._id,text:"started following you",recipients:[i._id],url:`/profile/${r.user._id}`};e(Object(n.b)({msg:a,auth:r,socket:o}))}catch(d){e({type:a.c.ALERT,payload:{error:d.response.data.msg}})}}},j=e=>{let{users:t,user:s,auth:r,socket:o}=e;return async e=>{let i;t.every((e=>e._id!==s._id))?i={...s,followers:Object(a.a)(s.followers,r.user._id)}:t.forEach((e=>{e._id===s._id&&(i={...e,followers:Object(a.a)(e.followers,r.user._id)})})),e({type:l.UNFOLLOW,payload:i}),e({type:a.c.AUTH,payload:{...r,user:{...r.user,following:Object(a.a)(r.user.following,i._id)}}});try{const t=await Object(c.c)(`/user/${s._id}/unfollow`,null,r.token);o.emit("unFollow",t.data.newUser);const a={id:r.user._id,text:"started following you",recipients:[i._id],url:`/profile/${r.user._id}`};e(Object(n.f)({msg:a,auth:r,socket:o}))}catch(d){e({type:a.c.ALERT,payload:{error:d.response.data.msg}})}}}},265:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s(13),r=s(4),n=s(7),l=s(18),o=s(120),i=s(0);t.default=()=>{const{id:e}=Object(c.h)(),[t,s]=Object(a.useState)([]),{auth:d,detailPost:j}=Object(r.c)((e=>e)),m=Object(r.b)();return Object(a.useEffect)((()=>{if(m(Object(n.d)({detailPost:j,id:e,auth:d})),j.length>0){const t=j.filter((t=>t._id===e));s(t)}}),[j,m,e,d]),Object(i.jsxs)("div",{className:"posts",children:[0===t.length&&Object(i.jsx)("img",{src:l.a,alt:"Loading...",className:"d-block mx-auto my-4"}),t.map((e=>Object(i.jsx)(o.a,{post:e},e._id)))]})}},266:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s(13),r=s(23),n=s(4),l=s(2),o=s(26),i=s(55),d=s(0);var j=e=>{let{setOnEdit:t}=e;const[s,c]=Object(a.useState)({fullname:"",mobile:"",address:"",website:"",story:"",gender:""}),{fullname:r,mobile:j,address:m,website:u,story:b,gender:p}=s,[h,O]=Object(a.useState)(""),{auth:x,theme:y}=Object(n.c)((e=>e)),f=Object(n.b)();Object(a.useEffect)((()=>{c(x.user)}),[x.user]);const g=e=>{const{name:t,value:a}=e.target;c({...s,[t]:a})};return Object(d.jsxs)("div",{className:"edit_profile",children:[Object(d.jsx)("button",{className:"btn btn-danger btn_close",onClick:()=>t(!1),children:"Close"}),Object(d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f(Object(o.e)({userData:s,avatar:h,auth:x}))},children:[Object(d.jsxs)("div",{className:"info_avatar",children:[Object(d.jsx)("img",{alt:"profile",src:h?URL.createObjectURL(h):x.user.avatar,style:{filter:y?"invert(1)":"invert(0)"}}),Object(d.jsxs)("span",{children:[Object(d.jsx)("i",{className:"fas fa-camera"}),Object(d.jsx)("p",{children:"Change"}),Object(d.jsx)("input",{type:"file",name:"file",id:"file_up",accept:"image/*",onChange:e=>{const t=e.target.files[0],s=Object(i.a)(t);if(s)return f({type:l.c.ALERT,payload:{error:s}});O(t)}})]})]}),Object(d.jsxs)("div",{className:"form_group",children:[Object(d.jsx)("label",{htmlFor:"fullname",children:"Full Name"}),Object(d.jsxs)("div",{className:"position-relative",children:[Object(d.jsx)("input",{type:"text",className:"form-control",id:"fullname",name:"fullname",value:r,onChange:g}),Object(d.jsxs)("small",{className:"text-danger position-absolute",style:{top:"50%",right:"5px",transform:"translateY(-50%)"},children:[r.length,"/25"]})]})]}),Object(d.jsxs)("div",{className:"form_group",children:[Object(d.jsx)("label",{htmlFor:"mobile",children:"Mobile"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"mobile",name:"mobile",value:j,onChange:g})]}),Object(d.jsxs)("div",{className:"form_group",children:[Object(d.jsx)("label",{htmlFor:"address",children:"Address"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"address",name:"address",value:m,onChange:g})]}),Object(d.jsxs)("div",{className:"form_group",children:[Object(d.jsx)("label",{htmlFor:"website",children:"Website"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"website",name:"website",value:u,onChange:g})]}),Object(d.jsxs)("div",{className:"form_group",children:[Object(d.jsx)("label",{htmlFor:"story",children:"Story"}),Object(d.jsx)("textarea",{cols:"30",rows:"4",type:"text",className:"form-control",id:"story",name:"story",value:b,onChange:g}),Object(d.jsxs)("small",{className:"text-danger d-block text-right",children:[b.length,"/200"]})]}),Object(d.jsx)("label",{htmlFor:"gender",children:"Gender"}),Object(d.jsx)("div",{className:"input-group-prepend px-0 mb-4",children:Object(d.jsxs)("select",{className:"custom-select text-capitalize",name:"gender",id:"gender",onChange:g,value:p,children:[Object(d.jsx)("option",{value:"male",children:"Male"}),Object(d.jsx)("option",{value:"female",children:"Female"})]})}),Object(d.jsx)("button",{className:"btn btn-info w-100",type:"submit",children:"Save"})]})]})},m=s(58),u=s(37);var b=e=>{let{users:t,setShowFollowing:s}=e;const{auth:a}=Object(n.c)((e=>e));return Object(d.jsx)("div",{className:"follow",children:Object(d.jsxs)("div",{className:"follow_box",children:[Object(d.jsx)("h5",{className:"text-center follow_box-heading",children:"Following"}),Object(d.jsx)("hr",{}),t.map((e=>Object(d.jsx)(u.a,{setShowFollowing:s,user:e,children:a.user._id!==e._id&&Object(d.jsx)(m.a,{user:e})},e._id))),Object(d.jsx)("div",{className:"close",onClick:()=>s(!1),children:"\xd7"})]})})};var p=e=>{let{users:t,setShowFollowers:s}=e;const{auth:a}=Object(n.c)((e=>e));return Object(d.jsx)("div",{className:"follow",children:Object(d.jsxs)("div",{className:"follow_box",children:[Object(d.jsx)("h5",{className:"text-center follow_box-heading",children:"Followers"}),Object(d.jsx)("hr",{}),t.map((e=>Object(d.jsx)(u.a,{setShowFollowers:s,user:e,children:a.user._id!==e._id&&Object(d.jsx)(m.a,{user:e})},e._id))),Object(d.jsx)("div",{className:"close",onClick:()=>s(!1),children:"\xd7"})]})})},h=s(33);var O=e=>{let{setChangePassword:t}=e;const[s,c]=Object(a.useState)(""),[r,l]=Object(a.useState)(""),[o,i]=Object(a.useState)(""),{auth:j,theme:m}=Object(n.c)((e=>e)),u=Object(n.b)();return Object(d.jsxs)("div",{className:"edit_profile",children:[Object(d.jsx)("button",{className:"btn btn-danger btn_close",onClick:()=>t(!1),children:"Close"}),Object(d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u(Object(h.b)({oldPassword:s,newPassword:r,cnfNewPassword:o,auth:j}))},children:[Object(d.jsxs)("div",{className:"form_group",children:[Object(d.jsx)("label",{htmlFor:"oldPassword",children:"old password"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"oldPassword",name:"oldPassword",value:s,onChange:e=>c(e.target.value)})]}),Object(d.jsxs)("div",{className:"form_group",children:[Object(d.jsx)("label",{htmlFor:"newPassword",children:"new password"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"newPassword",name:"newPassword",value:r,onChange:e=>l(e.target.value)})]}),Object(d.jsxs)("div",{className:"form_group",children:[Object(d.jsx)("label",{htmlFor:"cnfNewPassword",children:"confirm new password"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"cnfNewPassword",name:"cnfNewPassword",value:o,onChange:e=>i(e.target.value)})]}),Object(d.jsx)("button",{className:"btn btn-info w-100",type:"submit",children:"update"})]})]})};var x=e=>{let{id:t,auth:s,profile:c,dispatch:n}=e;const[o,i]=Object(a.useState)([]),[u,h]=Object(a.useState)(!1),[x,y]=Object(a.useState)(!1),[f,g]=Object(a.useState)(!1),[v,_]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{if(t===s.user._id)i([s.user]);else{const e=c.users.filter((e=>e._id===t));i(e)}}),[t,s,n,c.users]),Object(a.useEffect)((()=>{n(f||v||u?{type:l.c.MODAL,payload:!0}:{type:l.c.MODAL,payload:!1})}),[f,v,u,n]),Object(d.jsx)("div",{className:"info",children:o.map((e=>Object(d.jsxs)("div",{className:"info_container",children:[Object(d.jsx)("div",{className:"outer-shadow d-flex justify-content-center align-items-center",style:{borderRadius:"50%",height:"170px",width:"170px"},children:Object(d.jsx)(r.a,{src:e.avatar,size:"supper-avatar"})}),Object(d.jsxs)("div",{className:"info_content",children:[Object(d.jsxs)("div",{className:"info_content_title",children:[Object(d.jsx)("h2",{children:e.username}),e._id===s.user._id?Object(d.jsx)("button",{className:"btn-1 outer-shadow hover-in-shadow",onClick:()=>h(!0),children:"Edit Profile"}):Object(d.jsx)(m.a,{user:e}),e._id===s.user._id?Object(d.jsx)("button",{className:"btn-1 outer-shadow hover-in-shadow",onClick:()=>y(!0),children:"change password"}):Object(d.jsx)(m.a,{user:e})]}),Object(d.jsxs)("div",{className:"follow_btn",children:[Object(d.jsxs)("span",{className:"mr-4",onClick:()=>g(!0),children:[e.followers.length," Followers"]}),Object(d.jsxs)("span",{className:"ml-4",onClick:()=>_(!0),children:[e.following.length," Following"]})]}),Object(d.jsxs)("h6",{children:[e.fullname," ",Object(d.jsx)("span",{className:"color-violet",children:e.mobile})]}),Object(d.jsx)("p",{className:"m-0",children:e.address}),Object(d.jsx)("h6",{children:e.email}),Object(d.jsx)("a",{style:{textDecoration:"none"},href:e.website,target:"_blank",rel:"noreferrer",children:e.website}),Object(d.jsx)("p",{children:e.story})]}),u&&Object(d.jsx)(j,{setOnEdit:h}),x&&Object(d.jsx)(O,{setChangePassword:y}),f&&Object(d.jsx)(p,{users:e.followers,setShowFollowers:g}),v&&Object(d.jsx)(b,{users:e.following,setShowFollowing:_})]},e._id)))})},y=s(77),f=s(18),g=s(63),v=s(5);var _=e=>{let{auth:t,profile:s,dispatch:c,id:r}=e;const[n,l]=Object(a.useState)([]),[i,j]=Object(a.useState)(9),[m,u]=Object(a.useState)(0),[b,p]=Object(a.useState)(!1);Object(a.useEffect)((()=>{s.posts.forEach((e=>{e._id===r&&(l(e.posts),j(e.result),u(e.page))}))}),[s.posts,r]);return Object(d.jsxs)("div",{children:[Object(d.jsx)(y.a,{posts:n,result:i}),b&&Object(d.jsx)("img",{src:f.a,alt:"Loading...",className:"d-block mx-auto"}),Object(d.jsx)(g.a,{result:i,page:m,load:b,handleLoadMore:async()=>{p(!0);const e={...(await Object(v.b)(`user_posts/${r}?limit=${9*m}`,t.token)).data,page:m+1,_id:r};c({type:o.a.UPDATE_POST,payload:e}),p(!1)}})]})};var N=e=>{let{auth:t,dispatch:s}=e;const[c,r]=Object(a.useState)([]),[n,o]=Object(a.useState)(9),[i,j]=Object(a.useState)(2),[m,u]=Object(a.useState)(!1);Object(a.useEffect)((()=>(u(!0),Object(v.b)("getSavePosts",t.token).then((e=>{r(e.data.savePosts),o(e.data.result),u(!1)})).catch((e=>{s({type:l.c.ALERT,payload:{error:e.response.data.msg}})})),()=>r([]))),[s,t.token]);return Object(d.jsxs)("div",{children:[Object(d.jsx)(y.a,{posts:c,result:n}),m&&Object(d.jsx)("img",{src:f.a,alt:"Loading...",className:"d-block mx-auto"}),Object(d.jsx)(g.a,{result:n,page:i,load:m,handleLoadMore:async()=>{u(!0);const e=await Object(v.b)("getSavePosts?limit="+9*i,t.token);r(e.data.savePosts),o(e.data.result),j(i+1),u(!1)}})]})};t.default=()=>{const{profile:e,auth:t}=Object(n.c)((e=>e)),s=Object(n.b)(),{id:r}=Object(c.h)(),[l,i]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{e.ids.every((e=>e!==r))&&s(Object(o.c)({id:r,auth:t}))}),[r,t,s,e.ids]),Object(d.jsxs)("div",{className:"profile",children:[Object(d.jsx)(x,{auth:t,profile:e,dispatch:s,id:r}),t.user._id===r&&Object(d.jsxs)("div",{className:"profile_tab",children:[Object(d.jsx)("button",{className:l?"":"active",onClick:()=>i(!1),children:"posts"}),Object(d.jsx)("button",{className:l?"active":"",onClick:()=>i(!0),children:"saved"})]}),e.loading?Object(d.jsx)("img",{className:"d-block mx-auto my-4",src:f.a,alt:"Loading"}):Object(d.jsx)(d.Fragment,{children:l?Object(d.jsx)(N,{auth:t,dispatch:s}):Object(d.jsx)(_,{auth:t,profile:e,dispatch:s,id:r})})]})}},267:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s(119),r=s(37),n=s(4),l=s(13),o=s(23),i=s(43),d=s(0);var j=e=>{let{user:t,msg:s,theme:a}=e;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"chat_title",children:[Object(d.jsx)(o.a,{src:t.avatar,size:"small-avatar"}),Object(d.jsx)("span",{children:t.username})]}),s.text&&Object(d.jsx)("div",{className:"chat_text",style:{filter:a?"invert(1)":"invert(0)"},children:s.text}),s.media&&s.media.map(((e,t)=>Object(d.jsx)("div",{style:{maxWidth:"380px",maxHeight:"380px"},children:e.url.match(/video/i)?Object(i.b)(e.url,a):Object(i.a)(e.url,a)},t))),Object(d.jsx)("div",{className:"chat_time",children:new Date(s.createdAt).toLocaleString()})]})},m=s(78),u=s(2),b=s(55),p=s(31),h=s(18);var O=()=>{const{auth:e,message:t,theme:s,socket:c}=Object(n.c)((e=>e)),o=Object(n.b)(),[O,x]=Object(a.useState)([]),[y,f]=Object(a.useState)(""),[g,v]=Object(a.useState)(0),[_,N]=Object(a.useState)([]),{id:T}=Object(l.h)(),[w,E]=Object(a.useState)([]),[S,k]=Object(a.useState)(!1),A=Object(a.useRef)(),L=Object(a.useRef)();Object(a.useEffect)((()=>{const s=t.data.filter((t=>t.sender===e.user._id||t.sender===T));N(s)}),[t.data,e.user._id,T]),Object(a.useEffect)((()=>{const e=t.users.find((e=>e._id===T));e&&x(e)}),[t.users,T]);return Object(a.useEffect)((()=>{if(T){(async()=>{o({type:p.a.GET_MESSAGES,payload:{messages:[]}}),v(1),await o(Object(p.e)({auth:e,id:T})),A.current&&A.current.scrollIntoView({behaviour:"smooth",block:"end"})})()}}),[T,o,e]),Object(a.useEffect)((()=>{new IntersectionObserver((e=>{e[0].isIntersecting&&v((e=>e+1))}),{threshold:.1}).observe(L.current)}),[v]),Object(a.useEffect)((()=>{t.resultData>=9*(g-1)&&g>1&&o(Object(p.e)({auth:e,id:T,page:g}))}),[t.resultData,g,T,e,o]),Object(a.useEffect)((()=>{A.current&&A.current.scrollIntoView({behaviour:"smooth",block:"end"})}),[y]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"message_header",children:0!==O.length&&Object(d.jsx)(r.a,{user:O,children:Object(d.jsx)("i",{className:"fas fa-trash text-danger"})})}),Object(d.jsx)("div",{className:"chat_container",style:{height:w.length>0?"calc(100% - 180px)":""},children:Object(d.jsxs)("div",{className:"chat_display",ref:A,children:[Object(d.jsx)("button",{style:{marginTop:"-25px",opacity:0},ref:L,children:"Load.."}),_.map(((t,a)=>Object(d.jsxs)("div",{children:[t.sender!==e.user._id&&Object(d.jsx)("div",{className:"chat_row other_message",children:Object(d.jsx)(j,{user:O,msg:t,theme:s})}),t.sender===e.user._id&&Object(d.jsx)("div",{className:"chat_row you_message",children:Object(d.jsx)(j,{user:e.user,msg:t,theme:s})})]},a))),S&&Object(d.jsx)("div",{className:"chat_row you_message",children:Object(d.jsx)("img",{src:h.a,alt:"Loading..."})})]})}),Object(d.jsx)("div",{className:"show_media",style:{display:w.length>0?"":"none"},children:w.map(((e,t)=>Object(d.jsxs)("div",{id:"file_media",children:[e.type.match(/video/i)?Object(i.b)(URL.createObjectURL(e),s):Object(i.a)(URL.createObjectURL(e),s),Object(d.jsx)("span",{onClick:()=>(e=>{const t=[...w];t.splice(e,1),E(t)})(t),children:"\xd7"})]},t)))}),Object(d.jsxs)("form",{className:"chat_input",onSubmit:async t=>{if(t.preventDefault(),!y.trim()&&0===w.length)return;f(""),E([]),k(!0);let s=[];w.length>0&&(s=await Object(b.b)(w));const a={sender:e.user._id,recipient:T,text:y,media:s,createdAt:(new Date).toISOString()};k(!1),await o(Object(p.b)({msg:a,auth:e,socket:c})),A.current&&A.current.scrollIntoView({behaviour:"smooth",block:"end"})},children:[Object(d.jsx)("input",{placeholder:"Type a message.",type:"text",value:y,onChange:e=>f(e.target.value),style:{filter:s?"invert(1)":"invert(0)",background:s?"#040404":"",color:s?"white":""}}),Object(d.jsx)(m.a,{setContent:f,content:y,theme:s}),Object(d.jsxs)("div",{className:"file_upload",children:[Object(d.jsx)("i",{className:"fas fa-image color-c1"}),Object(d.jsx)("input",{type:"file",name:"file",id:"file",multiple:!0,accept:"image/*,video/*",onChange:e=>{const t=[...e.target.files];let s="",a=[];t.forEach((e=>e?e.size>5242880?s="Image size must be less than 5 mb.":a.push(e):s="File does not exist.")),s&&o({type:u.c.ALERT,payload:{error:s}}),E([...w,...a])}})]}),Object(d.jsx)("button",{type:"submit",disabled:!(y||w.length>0),className:"material-icons",children:"near_me"})]})]})};t.default=()=>Object(d.jsxs)("div",{className:"message d-flex",children:[Object(d.jsx)("div",{className:"col-md-4 px-0",style:{borderRight:"1px solid #ddd"},children:Object(d.jsx)(c.a,{})}),Object(d.jsx)("div",{className:"col-md-8 px-0",children:Object(d.jsx)(O,{})})]})},279:function(e,t,s){},287:function(e,t,s){var a={"./adminDashboard":115,"./adminDashboard.js":115,"./discover":176,"./discover.js":176,"./home":116,"./home.js":116,"./login":92,"./login.js":92,"./message":112,"./message/":112,"./message/[id]":267,"./message/[id].js":267,"./message/index":112,"./message/index.js":112,"./post/[id]":265,"./post/[id].js":265,"./profile/[id]":266,"./profile/[id].js":266,"./register":114,"./register.js":114};function c(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}c.keys=function(){return Object.keys(a)},c.resolve=r,e.exports=c,c.id=287},306:function(e,t,s){},31:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return l})),s.d(t,"d",(function(){return o})),s.d(t,"e",(function(){return i}));var a=s(2),c=s(5);const r={ADD_USER:"ADD_USER",ADD_MESSAGE:"ADD_MESSAGE",GET_CONVERSATIONS:"GET_CONVERSATIONS",GET_MESSAGES:"GET_MESSAGES"},n=e=>{let{user:t,message:s}=e;return async e=>{s.users.every((e=>e._id!==t._id))&&e({type:r.ADD_USER,payload:{...t,text:"",media:[]}})}},l=e=>{let{msg:t,auth:s,socket:n}=e;return async e=>{e({type:r.ADD_MESSAGE,payload:t}),n.emit("addMessage",t);try{await Object(c.d)("message",t,s.token)}catch(l){e({type:a.c.ALERT,payload:{error:l.response.data.msg}})}}},o=e=>{let{auth:t,page:s=1}=e;return async e=>{try{const a=await Object(c.b)("conversations?limit="+9*s,t.token);let n=[];a.data.conversations.forEach((e=>{e.recipients.forEach((s=>{s._id!==t.user._id&&n.push({...s,text:e.text,media:e.media})}))})),e({type:r.GET_CONVERSATIONS,payload:{newArr:n,result:a.data.result}})}catch(n){e({type:a.c.ALERT,payload:{error:n.response.data.msg}})}}},i=e=>{let{auth:t,id:s,page:n=1}=e;return async e=>{try{const a=await Object(c.b)(`message/${s}?limit=${9*n}`,t.token);e({type:r.GET_MESSAGES,payload:a.data})}catch(l){e({type:a.c.ALERT,payload:{error:l.response.data.msg}})}}}},312:function(e,t,s){},33:function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return o})),s.d(t,"e",(function(){return i})),s.d(t,"f",(function(){return d})),s.d(t,"g",(function(){return j})),s.d(t,"d",(function(){return m}));var a=s(5),c=s(2);var r=e=>{let{fullname:t,username:s,email:a,password:c,cf_password:r}=e;const n={};return t?t.length>25&&(n.fullname="Full name must be smaller than 25 characters."):n.fullname="Please add full name.",s?s.replace(/ /g,"").length>25&&(n.username="User name must be smaller than 25 characters."):n.username="Please add User name.",a||(n.email="Please add Email."),c?c.length<6&&(n.password="Password must be al least 6 characters long."):n.password="Please add Password.",c!==r&&(n.cf_password="Password does not match."),{errMsg:n,errLength:Object.keys(n).length}};const n=e=>async t=>{try{t({type:c.c.ALERT,payload:{loading:!0}});const s=await Object(a.d)("login",e);t({type:c.c.AUTH,payload:{token:s.data.access_token,user:s.data.user}}),t({type:c.c.USER_TYPE,payload:s.data.user.role}),localStorage.setItem("firstLogin",!0),t({type:c.c.ALERT,payload:{success:s.data.msg}})}catch(s){t({type:c.c.ALERT,payload:{error:s.response.data.msg}})}},l=e=>{let{oldPassword:t,newPassword:s,cnfNewPassword:r,auth:n}=e;return async e=>{t&&0!==t.length||e({type:c.c.ALERT,payload:{error:"Please enter your old  password."}}),s&&0!==s.length||e({type:c.c.ALERT,payload:{error:"Please enter your new  password."}}),r&&0!==r.length||e({type:c.c.ALERT,payload:{error:"Please confirm your new  password."}}),s!==r&&e({type:c.c.ALERT,payload:{error:"Your password does not match"}});try{e({type:c.c.ALERT,payload:{loading:!0}});const r=await Object(a.d)("changePassword",{oldPassword:t,newPassword:s},n.token);e({type:c.c.ALERT,payload:{loading:!1}}),e({type:c.c.ALERT,payload:{success:r.data.msg}})}catch(l){e({type:c.c.ALERT,payload:{error:l.response.data.msg}})}}},o=e=>async t=>{try{t({type:c.c.ALERT,payload:{loading:!0}});const s=await Object(a.d)("admin_login",e);t({type:c.c.AUTH,payload:{token:s.data.access_token,user:s.data.user}}),t({type:c.c.USER_TYPE,payload:s.data.user.role}),localStorage.setItem("firstLogin",!0),t({type:c.c.ALERT,payload:{success:s.data.msg}})}catch(s){t({type:c.c.ALERT,payload:{error:s.response.data.msg}})}},i=()=>async e=>{if(localStorage.getItem("firstLogin")){e({type:c.c.ALERT,payload:{loading:!0}});try{const t=await Object(a.d)("refresh_token");e({type:c.c.AUTH,payload:{token:t.data.access_token,user:t.data.user}}),e({type:c.c.USER_TYPE,payload:t.data.user.role}),e({type:c.c.ALERT,payload:{}})}catch(t){e({type:c.c.ALERT,payload:{error:t.response.data.msg}})}}},d=e=>async t=>{const s=r(e);if(s.errLength>0)return t({type:c.c.ALERT,payload:s.errMsg});try{t({type:c.c.ALERT,payload:{loading:!0}});const s=await Object(a.d)("register",e);t({type:c.c.AUTH,payload:{token:s.data.access_token,user:s.data.user}}),t({type:c.c.USER_TYPE,payload:s.data.user.role}),localStorage.setItem("firstLogin",!0),t({type:c.c.ALERT,payload:{success:s.data.msg}})}catch(n){t({type:c.c.ALERT,payload:{error:n.response.data.msg}})}},j=e=>async t=>{const s=r(e);if(s.errLength>0)return t({type:c.c.ALERT,payload:s.errMsg});try{t({type:c.c.ALERT,payload:{loading:!0}});const s=await Object(a.d)("register_admin",e);t({type:c.c.ALERT,payload:{success:s.data.msg}})}catch(n){t({type:c.c.ALERT,payload:{error:n.response.data.msg}})}},m=()=>async e=>{try{localStorage.removeItem("firstLogin"),await Object(a.d)("logout"),window.location.href="/"}catch(t){e({type:c.c.ALERT,payload:{error:t.response.data.msg}})}}},334:function(e,t){},362:function(e,t){},364:function(e,t){},37:function(e,t,s){"use strict";s(1);var a=s(23),c=s(9),r=s(0);t.a=e=>{let{children:t,user:s,border:n,handleClose:l,setShowFollowers:o,setShowFollowing:i,msg:d}=e;return Object(r.jsxs)("div",{className:`d-flex justify-content-between p-2 w-100 align-items-center ${n}`,children:[Object(r.jsx)("div",{children:Object(r.jsxs)(c.b,{to:`/profile/${s._id}`,onClick:()=>{l&&l(),o&&o(!1),i&&i(!1)},className:"d-flex align-items-center",style:{textDecoration:"none"},children:[Object(r.jsx)("div",{className:"outer-shadow big-avatar-cover ",children:Object(r.jsx)(a.a,{src:s.avatar,size:"big-avatar"})}),Object(r.jsxs)("div",{className:"ms-2",style:{transform:"translateY(-2px)"},children:[Object(r.jsx)("span",{className:"d-block color-c2",children:s.username}),Object(r.jsx)("small",{className:"d-flex text-muted",style:{flexWrap:"wrap"},children:d?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:s.text}),s.media.length>0&&Object(r.jsxs)("div",{children:[s.media.length," ",Object(r.jsx)("i",{className:"fas fa-image"})]})]}):s.fullname})]})]})}),t]})}},395:function(e,t){},397:function(e,t){},398:function(e,t){},403:function(e,t){},405:function(e,t){},425:function(e,t){},43:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return r}));var a=s(0);const c=(e,t)=>Object(a.jsx)("img",{src:e,className:"img-thumbnail",alt:"uploaded pics",style:{filter:t?"invert(1)":"invert(0)"}}),r=(e,t)=>Object(a.jsx)("video",{controls:!0,src:e,className:"img-thumbnail",alt:"uploaded pics",style:{filter:t?"invert(1)":"invert(0)"}})},441:function(e,t){},444:function(e,t){},5:function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"d",(function(){return n})),s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return o}));var a=s(81),c=s.n(a);const r=async(e,t)=>await c.a.get(`/api/${e}`,{headers:{Authorization:t}}),n=async(e,t,s)=>await c.a.post(`/api/${e}`,t,{headers:{Authorization:s}}),l=async(e,t,s)=>await c.a.patch(`/api/${e}`,t,{headers:{Authorization:s}}),o=async(e,t)=>await c.a.delete(`/api/${e}`,{headers:{Authorization:t}})},55:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return r}));var a=s(166);a.v2.config({cloud_name:"doagrwjza",api_key:"836546579181417",api_secret:"t4TpTkLAUMpM99uw4s2p0RIp140"});const c=e=>{let t="";return e?e.size>1048576?"File size must be less than 1 Mb.":"image/jpeg"!==e.type&&"image/png"!==e.type?"Image must be jpeg or png.":t:"File does not exist."},r=async e=>{let t=[];for(const s of e){const e=new FormData;s.camera?e.append("file",s.camera):e.append("file",s),console.log(s),e.append("upload_preset","anchal"),e.append("cloud_name","djihupfak");const a=await fetch("https://api.cloudinary.com/v1_1/djihupfak/image/upload",{method:"POST",body:e}),c=await a.json();console.log(c),t.push({public_id:c.public_id,url:c.secure_url})}return t}},58:function(e,t,s){"use strict";var a=s(1),c=s(4),r=s(26),n=s(0);t.a=e=>{let{user:t}=e;const[s,l]=Object(a.useState)(!1),{auth:o,profile:i,socket:d}=Object(c.c)((e=>e)),j=Object(c.b)(),[m,u]=Object(a.useState)(!1);Object(a.useEffect)((()=>(o.user.following.find((e=>e._id===t._id))&&l(!0),()=>l(!1))),[o.user.following,t._id]);return Object(n.jsx)(n.Fragment,{children:s?Object(n.jsx)("button",{className:"btn-1 hover-in-shadow outer-shadow",onClick:async()=>{m||(l(!1),u(!0),await j(Object(r.d)({users:i.users,user:t,auth:o,socket:d})),u(!1))},children:"Unfollow"}):Object(n.jsx)("button",{className:"btn-1 hover-in-shadow outer-shadow",onClick:async()=>{m||(l(!0),u(!0),await j(Object(r.b)({users:i.users,user:t,auth:o,socket:d})),u(!1))},children:"Follow"})})}},586:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),r=s(113),n=s.n(r),l=(s(279),s(9)),o=s(13),i=s(4),d=s(274),j=s(0);var m=()=>Object(j.jsx)("div",{className:"position-relative",style:{minHeight:"calc(100vh - 70px)"},children:Object(j.jsx)("h2",{className:"position-absolute text-secondary",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:"404 | Not Found."})});const u=e=>{try{return c.a.createElement(s(287)(`./${e}`).default)}catch(t){return Object(j.jsx)(m,{})}};var b=()=>{const{page:e,id:t}=Object(o.h)(),{auth:s}=Object(i.c)((e=>e));let a="";return s.token&&(a=t?`${e}/[id]`:`${e}`),u(a)};var p=e=>localStorage.getItem("firstLogin")?Object(j.jsx)(o.b,{...e}):Object(j.jsx)(o.a,{to:"/"}),h=s(92),O=s(114),x=s(116);var y=()=>Object(j.jsxs)("div",{style:{background:"white",top:0,left:0,zIndex:50,opacity:.7},className:"position-fixed vh-100 w-100   d-flex justify-content-center align-items-center",children:[Object(j.jsxs)("div",{className:"loading",children:[Object(j.jsx)("span",{}),Object(j.jsx)("span",{}),Object(j.jsx)("span",{}),Object(j.jsx)("span",{})]}),Object(j.jsx)("text",{className:"loading_text",fill:"#fff",x:"5",y:"47",children:"Loading"})]});var f=e=>{let{msg:t,handleShow:s,bgColor:a}=e;return Object(j.jsxs)("div",{className:`toast show position-fixed text-light ${a} `,style:{top:"5px",right:"5px",minWidth:"200px",zIndex:50},children:[Object(j.jsxs)("div",{className:`toast-header text-light ${a}`,children:[Object(j.jsx)("strong",{className:"mr-auto text-light",children:t.title}),Object(j.jsx)("button",{className:"ml-auto mb-1 close text-light","data-dismiss":"toast",style:{border:"none",background:"none",fontSize:"30px",right:0},onClick:s,children:"\xd7"})]}),Object(j.jsx)("div",{className:"toast-body",children:t.body})]})},g=s(2);var v=()=>{const{alert:e}=Object(i.c)((e=>e)),t=Object(i.b)();return Object(j.jsxs)("div",{children:[e.loading&&Object(j.jsx)(y,{}),e.error&&Object(j.jsx)(f,{msg:{title:"Error",body:e.error},handleShow:()=>t({type:g.c.ALERT,payload:{}}),bgColor:"bg-danger"}),e.success&&Object(j.jsx)(f,{msg:{title:"Success",body:e.success},handleShow:()=>t({type:g.c.ALERT,payload:{}}),bgColor:"bg-success"})]})},_=s(33),N=s(23),T=s(62),w=s.n(T),E=s(11);var S=()=>{const{auth:e,notify:t}=Object(i.c)((e=>e)),s=Object(i.b)(),a=()=>{s({type:E.a.UPDATE_SOUND,payload:!t.sound})};return Object(j.jsxs)("div",{className:"mt-1",style:{minWidth:"280px",boxShadow:"5px 8px 8px var(--c2) ,-3px -3px 8px var(--c3)",background:"white",borderRadius:"10px",borderTopRightRadius:"0"},children:[Object(j.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(j.jsx)("h3",{children:"Notifications"}),t.sound?Object(j.jsx)("i",{className:"fas fa-bell text-danger",style:{fontSize:"1.2rem",cursor:"pointer"},onClick:a}):Object(j.jsx)("i",{className:"fas fa-bell-slash text-danger",style:{fontSize:"1.2rem",cursor:"pointer"},onClick:a})]}),Object(j.jsx)("hr",{className:"mt-1"}),0===t.data.length&&Object(j.jsx)("span",{className:"text-muted w-100 text-center",children:"No Notifications"}),Object(j.jsx)("div",{style:{maxHeight:"calc(100vh - 200px)",overflow:"auto"},children:t.data.map(((t,a)=>Object(j.jsxs)("div",{className:"px-2 mb-3",children:[Object(j.jsxs)(l.b,{to:`${t.url}`,style:{textDecoration:"none"},className:"d-flex text-dark align-items-center",onClick:()=>(t=>{s(Object(E.e)({msg:t,auth:e}))})(t),children:[Object(j.jsx)(N.a,{src:t.user.avatar,size:"big-avatar"}),Object(j.jsxs)("div",{className:"flex-fill mx-1",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("strong",{className:"mr-1",children:t.user.username}),Object(j.jsx)("span",{children:t.text})]}),t.content&&Object(j.jsxs)("small",{children:[t.content.slice(0,20),"..."]})]}),Object(j.jsx)("div",{style:{width:"30px"},children:t.image&&Object(j.jsx)(N.a,{src:t.image,size:"medium-avatar"})})]}),Object(j.jsxs)("small",{className:"text-muted d-flex justify-content-between px-2",children:[w()(t.createdAt).fromNow(),!t.isRead&&Object(j.jsx)("i",{className:"fas fa-circle color-c1"})]})]},a)))}),Object(j.jsx)("hr",{className:"my-1"}),Object(j.jsx)("div",{className:"text-end my-auto me-2 color-c1",style:{cursor:"pointer"},onClick:()=>{const a=t.data.filter((e=>!1===e.isRead));return 0===a.length||window.confirm(`You have ${a.length} unread notifications.Do you want to delete all notifications?`)?s(Object(E.c)(e.token)):void 0},children:"Delete"})]})};var k=()=>{const{auth:e,theme:t,notify:s}=Object(i.c)((e=>e)),a=Object(i.b)(),{pathname:c}=Object(o.g)(),r=e=>{if(e===c)return"active"};return Object(j.jsx)("div",{className:"menu",children:Object(j.jsxs)("ul",{className:"navbar-nav flex-row mb-2 mb-lg-0",children:[[{label:"Home",icon:"home",path:"/"},{label:"Message",icon:"near_me",path:"/message"},{label:"Discover",icon:"explore",path:"/discover"}].map(((e,t)=>Object(j.jsx)("li",{className:`nav-item px-2 ${r(e.path)}`,children:Object(j.jsx)(l.b,{className:"nav-link ",to:e.path,children:Object(j.jsx)("span",{className:"material-icons ",children:e.icon})})},t))),Object(j.jsxs)("li",{className:"nav-item dropdown",style:{opacity:"1"},children:[Object(j.jsxs)("span",{className:"nav-link position-relative",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:[Object(j.jsx)("span",{style:{color:s.data.length>0?"var(--c1)":""},className:"material-icons ",children:"notifications"}),Object(j.jsx)("span",{className:"notify_length",children:s.data.length})]}),Object(j.jsx)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:Object(j.jsx)(S,{})})]}),Object(j.jsxs)("li",{className:"nav-item dropdown",style:{opacity:"1"},children:[Object(j.jsx)("span",{className:"nav-link dropdown-toggle",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:Object(j.jsx)(N.a,{src:e.user.avatar,size:"medium-avatar"})}),Object(j.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:[Object(j.jsx)("li",{children:Object(j.jsx)(l.b,{style:{color:"white"},className:"dropdown-item",to:`/profile/${e.user._id}`,children:"Profile"})}),Object(j.jsx)("li",{children:Object(j.jsx)("label",{style:{color:"white"},htmlFor:"theme",className:"dropdown-item",onClick:()=>a({type:g.c.THEME,payload:!t}),children:t?"Light mode":"Dark mode"})}),Object(j.jsx)("li",{children:Object(j.jsx)("hr",{className:"dropdown-divider"})}),Object(j.jsx)("li",{children:Object(j.jsx)(l.b,{style:{color:"white"},className:"dropdown-item",to:"/",onClick:()=>a(Object(_.d)()),children:"Logout"})})]})]})]})})},A=s(5),L=s(37),P=s(18);var C=()=>{const[e,t]=Object(a.useState)(""),[s,c]=Object(a.useState)([]),{auth:r}=Object(i.c)((e=>e)),n=Object(i.b)(),[l,o]=Object(a.useState)(!1),d=()=>{t(""),c([])};return Object(j.jsxs)("form",{className:"search_form",onSubmit:async t=>{if(t.preventDefault(),e)try{o(!0);const t=await Object(A.b)(`search?username=${e}`,r.token);c(t.data.users),o(!1)}catch(s){n({type:g.c.ALERT,payload:{error:s.response.data.msg}})}},children:[Object(j.jsx)("input",{type:"text",title:"Enter to Search",name:"search",value:e,id:"search",onChange:e=>t(e.target.value.toLowerCase().replace(/ /g," "))}),Object(j.jsxs)("div",{className:"search_icon",style:{opacity:e?0:.3},children:[Object(j.jsx)("span",{className:"material-icons",children:"search"}),Object(j.jsx)("span",{children:"Enter to Search"})]}),Object(j.jsx)("div",{onClick:d,className:"close_search",style:{opacity:0===s.length?0:1},children:"\xd7"}),Object(j.jsx)("button",{type:"submit",style:{display:"none"},children:"Search"}),l&&Object(j.jsx)("img",{className:"loading",src:P.a,alt:"Loading"}),Object(j.jsx)("div",{className:"users",children:e&&s.map((e=>Object(j.jsx)(L.a,{user:e,border:"border",handleClose:d},e._id)))})]})},R=s(7),D=s(59);var I=()=>{const{auth:e}=Object(i.c)((e=>e)),t=Object(i.b)();return Object(j.jsx)("div",{className:"header bg-light",children:Object(j.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light justify-content-between",children:Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)(l.b,{to:"/",className:"logo",onClick:()=>{window.scrollTo({top:0}),t(Object(R.e)(e.token)),t(Object(D.b)(e.token))},children:Object(j.jsx)("h1",{className:"navbar-brand",style:{color:"darkblue"},children:"Socialgram"})}),Object(j.jsx)(C,{}),Object(j.jsx)(k,{})]})})})},U=s(78),G=s(43);var F=()=>{const{auth:e,theme:t,status:s,socket:c}=Object(i.c)((e=>e)),r=Object(i.b)(),[n,l]=Object(a.useState)(""),[o,d]=Object(a.useState)([]),[m,u]=Object(a.useState)(!1),b=Object(a.useRef)(),p=Object(a.useRef)(),[h,O]=Object(a.useState)("");return Object(a.useEffect)((()=>{s.onEdit&&(l(s.content),d(s.images))}),[s]),Object(j.jsx)("div",{className:"status_modal",children:Object(j.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),0===o.length)return r({type:g.c.ALERT,payload:{error:"Add image(s)."}});s.onEdit?r(Object(R.k)({content:n,images:o,auth:e,status:s})):r(Object(R.b)({content:n,images:o,auth:e,socket:c})),l(""),d([]),h&&h.stop(),r({type:g.c.STATUS,payload:!1})},children:[Object(j.jsxs)("div",{className:"status_header",children:[Object(j.jsx)("h5",{className:"m-0",children:"Create Post"}),Object(j.jsx)("span",{onClick:()=>r({type:g.c.STATUS,payload:!1}),children:"\xd7"})]}),Object(j.jsxs)("div",{className:"status_body",children:[Object(j.jsx)("textarea",{onChange:e=>l(e.target.value),value:n,name:"content",placeholder:`${e.user.username}, What's on your mind?`,style:{filter:t?"invert(1)":"invert(0)",color:t?"white":"#111",background:t?"rgb(0,0,0,0.3)":""}}),Object(j.jsxs)("div",{className:"d-flex",children:[Object(j.jsx)("div",{className:"flex-fill"}),Object(j.jsx)(U.a,{setContent:l,content:n,theme:t})]}),Object(j.jsx)("div",{className:"show_images",children:o.map(((e,s)=>Object(j.jsxs)("div",{className:"file_img",children:[e.camera?Object(G.a)(e.camera,t):e.url?Object(j.jsx)(j.Fragment,{children:e.url.match(/video/i)?Object(G.b)(e.url):Object(G.a)(e.url)}):Object(j.jsx)(j.Fragment,{children:e.type.match(/video/i)?Object(G.b)(URL.createObjectURL(e,t)):Object(G.a)(URL.createObjectURL(e,t))}),Object(j.jsx)("span",{onClick:()=>(e=>{const t=[...o];t.splice(e,1),d(t)})(s),children:"\xd7"})]},s)))}),m&&Object(j.jsxs)("div",{className:"stream position-relative",children:[Object(j.jsx)("video",{width:"100%",height:"100%",ref:b,style:{filter:t?"invert(1)":"invert(0)"},autoPlay:!0,muted:!0}),Object(j.jsx)("span",{onClick:()=>{h.stop(),u(!1)},children:"\xd7"}),Object(j.jsx)("canvas",{style:{display:"none"},ref:p})]}),Object(j.jsx)("div",{className:"input_images",children:m?Object(j.jsx)("i",{className:"fas fa-camera",onClick:()=>{const e=b.current.clientWidth,t=b.current.clientHeight;p.current.setAttribute("width",e),p.current.setAttribute("height",t);p.current.getContext("2d").drawImage(b.current,0,0,e,t);let s=p.current.toDataURL();d([...o,{camera:s}])}}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("i",{className:"fas fa-camera",onClick:()=>{u(!0),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((e=>{b.current.srcObject=e,b.current.play();const t=e.getTracks();O(t[0])})).catch((e=>console.log(e)))}}),Object(j.jsxs)("div",{className:"file_upload",children:[Object(j.jsx)("i",{className:"fas fa-image"}),Object(j.jsx)("input",{onChange:e=>{const t=[...e.target.files];let s="",a=[];t.forEach((e=>e?e.size>5242880?s="Image size must be less than 5 mb.":a.push(e):s="File does not exist.")),s&&r({type:g.c.ALERT,payload:{error:s}}),d([...o,...a])},type:"file",name:"file",id:"file",multiple:!0,accept:"image/*,video/*"})]})]})})]}),Object(j.jsx)("div",{className:"status_footer",children:Object(j.jsx)("button",{type:"submit",className:"btn btn-primary w-100",children:"Post"})})]})})},M=s(115),$=s(15),z=s(31),H=s.p+"static/media/pristine-609.9287f5ce.mp3";var W=()=>{const{auth:e,socket:t,notify:s}=Object(i.c)((e=>e)),c=Object(i.b)(),r=Object(a.useRef)();return Object(a.useEffect)((()=>{"user"===e.user.role?t.emit("joinUser",e.user._id):"admin"===e.user.role&&t.emit("joinAdmin",e.user._id)}),[t,e.user.role,e.user._id]),Object(a.useEffect)((()=>(t.on("getActiveUsersToClient",(e=>{c({type:$.a.GET_TOTAL_ACTIVE_USERS,payload:e})})),()=>t.off("getActiveUsersToClient"))),[t,c]),Object(a.useEffect)((()=>(t.on("likeToClient",(e=>{c({type:R.a.UPDATE_POST,payload:e})})),()=>t.off("likeToClient"))),[t,c]),Object(a.useEffect)((()=>(t.on("unLikeToClient",(e=>{c({type:R.a.UPDATE_POST,payload:e})})),()=>t.off("unLikeToClient"))),[t,c]),Object(a.useEffect)((()=>(t.on("createCommentToClient",(e=>{c({type:R.a.UPDATE_POST,payload:e})})),()=>t.off("createCommentToClient"))),[t,c]),Object(a.useEffect)((()=>(t.on("deleteCommentToClient",(e=>{c({type:R.a.UPDATE_POST,payload:e})})),()=>t.off("deleteCommentToClient"))),[t,c]),Object(a.useEffect)((()=>(t.on("followToClient",(t=>{c({type:g.c.AUTH,payload:{...e,user:t}})})),()=>t.off("followToClient"))),[t,c,e]),Object(a.useEffect)((()=>(t.on("unFollowToClient",(t=>{c({type:g.c.AUTH,payload:{...e,user:t}})})),()=>t.off("unFollowToClient"))),[t,c,e]),Object(a.useEffect)((()=>(t.on("createNotifyToClient",(e=>{var t,a,n;c({type:E.a.CREATE_NOTIFY,payload:e}),s.sound&&r.current.play(),t=e.user.username+" "+e.text,a=e.user.avatar,n=e.url,new Notification("CAMPUS CONNECT",{body:t,icon:a}).onclick=e=>{e.preventDefault(),window.open(n,"_blank")}})),()=>t.off("createNotifyToClient"))),[t,c,s.sound]),Object(a.useEffect)((()=>(t.on("removeNotifyToClient",(e=>{c({type:E.a.REMOVE_NOTIFY,payload:e})})),()=>t.off("removeNotifyToClient"))),[t,c]),Object(a.useEffect)((()=>(t.on("addMessageToClient",(e=>{c({type:z.a.ADD_MESSAGE,payload:e})})),()=>t.off("addMessageToClient"))),[]),Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("audio",{controls:!0,ref:r,style:{display:"none"},children:Object(j.jsx)("source",{src:H,type:"audio/mp3"})})})};var Y=function(){const{auth:e,status:t,modal:s,userType:c}=Object(i.c)((e=>e)),r=Object(i.b)();return Object(a.useEffect)((()=>{r(Object(_.e)());const e=Object(d.a)();return r({type:g.c.SOCKET,payload:e}),()=>e.close()}),[r]),Object(a.useEffect)((()=>{e.token&&(r(Object(R.e)(e.token)),r(Object(D.b)(e.token)),r(Object(E.d)(e.token)))}),[r,e.token]),Object(a.useEffect)((()=>{"Notification"in window?"granted"===Notification.permission||"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){})):alert("This browser does not support desktop notification")}),[]),Object(j.jsxs)(l.a,{children:[Object(j.jsx)(v,{}),Object(j.jsx)("input",{type:"checkbox",id:"theme"}),Object(j.jsx)("div",{className:`App ${(t||s)&&"mode"}`,children:Object(j.jsxs)("div",{className:"main",children:["user"===c&&e.token&&Object(j.jsx)(I,{}),t&&Object(j.jsx)(F,{}),e.token&&Object(j.jsx)(W,{}),Object(j.jsx)(o.b,{exact:!0,path:"/",component:"user"===c?e.token?x.default:h.default:e.token?M.default:h.default}),"user"===c&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(o.b,{exact:!0,path:"/register",component:O.default}),Object(j.jsxs)("div",{className:"wrap_page",children:[Object(j.jsx)(p,{exact:!0,path:"/:page",component:b}),Object(j.jsx)(p,{exact:!0,path:"/:page/:id",component:b})]})]})]})})]})};var V=e=>{e&&e instanceof Function&&s.e(3).then(s.bind(null,604)).then((t=>{let{getCLS:s,getFID:a,getFCP:c,getLCP:r,getTTFB:n}=t;s(e),a(e),c(e),r(e),n(e)}))},K=s(80),B=s(272);const q={};var J=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;return t.type===g.c.AUTH?t.payload:e};var Q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"user",t=arguments.length>1?arguments[1]:void 0;return t.type===g.c.USER_TYPE?t.payload:e};const X={};var Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;return t.type===g.c.ALERT?t.payload:e};var ee=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===g.c.THEME?t.payload:e},te=s(26);const se={loading:!1,ids:[],users:[],posts:[]};var ae=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te.a.LOADING:return{...e,loading:t.payload};case te.a.GET_USER:return{...e,users:[...e.users,t.payload.user]};case te.a.FOLLOW:case te.a.UNFOLLOW:return{...e,users:Object(g.b)(e.users,t.payload._id,t.payload)};case te.a.GET_ID:return{...e,ids:[...e.ids,t.payload]};case te.a.GET_POSTS:return{...e,posts:[...e.posts,t.payload]};case te.a.UPDATE_POST:return{...e,posts:Object(g.b)(e.posts,t.payload._id,t.payload)};default:return e}};var ce=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===g.c.STATUS?t.payload:e};const re={loading:!1,posts:[],result:0,page:2};var ne=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.a.CREATE_POST:return{...e,posts:[t.payload,...e.posts]};case R.a.LOADING_POST:return{...e,loading:t.payload};case R.a.GET_POSTS:return{...e,posts:t.payload.posts,result:t.payload.result,page:t.payload.page};case R.a.UPDATE_POST:return{...e,posts:Object(g.b)(e.posts,t.payload._id,t.payload)};case R.a.DELETE_POST:return{...e,posts:Object(g.a)(e.posts,t.payload._id)};case R.a.REPORT_POST:return{...e,posts:Object(g.b)(e.posts,t.payload._id,t.payload)};default:return e}};var le=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===g.c.MODAL?t.payload:e};var oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.a.GET_POST:return[...e,t.payload];case R.a.UPDATE_POST:return Object(g.b)(e,t.payload._id,t.payload);default:return e}};const ie={total_users:0,total_posts:0,total_comments:0,total_likes:0,total_active_users:0,total_spam_posts:0,spam_posts:[]};var de=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $.a.GET_TOTAL_USERS:return{...e,total_users:t.payload.total_users};case $.a.GET_TOTAL_POSTS:return{...e,total_posts:t.payload.total_posts};case $.a.GET_TOTAL_COMMENTS:return{...e,total_comments:t.payload.total_comments};case $.a.GET_TOTAL_LIKES:return{...e,total_likes:t.payload.total_likes};case $.a.GET_TOTAL_SPAM_POSTS:return{...e,total_spam_posts:t.payload.total_spam_posts};case $.a.GET_TOTAL_ACTIVE_USERS:return{...e,total_active_users:t.payload};case $.a.LOADING_ADMIN:return{...e,loading:t.payload};case $.a.GET_SPAM_POSTS:return{...e,spam_posts:[...t.payload]};case $.a.DELETE_POST:return{...e,spam_posts:Object(g.a)(e.spam_posts,t.payload._id)};default:return e}},je=s(68);const me={loading:!1,posts:[],result:9,page:2,firstLoad:!1};var ue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je.a.LOADING:return{...e,loading:t.payload};case je.a.GET_POSTS:return{...e,posts:t.payload.posts,result:t.payload.result,firstLoad:!0};case je.a.UPDATE_POSTS:return{...e,posts:[...t.payload.posts],result:t.payload.result,page:e.page+1};default:return e}};const be={loading:!1,users:[]};var pe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.a.LOADING:return{...e,loading:t.payload};case D.a.GET_USERS:return{...e,users:t.payload.users};default:return e}};var he=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===g.c.SOCKET?t.payload:e};const Oe={loading:!1,data:[],sound:!1};var xe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.a.GET_NOTIFIES:return{...e,data:t.payload};case E.a.CREATE_NOTIFY:return{...e,data:[...e.data,t.payload]};case E.a.UPDATE_NOTIFY:return{...e,data:Object(g.b)(e.data,t.payload._id,t.payload)};case E.a.UPDATE_SOUND:return{...e,sound:t.payload};case E.a.REMOVE_NOTIFY:return{...e,data:e.data.filter((e=>e.id!==t.payload.id||e.url!==t.payload.url))};case E.a.DELETE_ALL_NOTIFICATIONS:return{...e,data:t.payload};default:return e}};const ye={users:[],resultUsers:0,data:[],resultData:0,firstLoad:!1};var fe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.a.ADD_USER:return{...e,users:[...e.data,t.payload]};case z.a.ADD_MESSAGE:return{...e,data:[...e.data,t.payload],users:e.users.map((e=>e._id===t.payload.recipient||e._id===t.payload.sender?{...e,text:t.payload.text,media:t.payload.media}:e))};case z.a.GET_CONVERSATIONS:return{...e,users:t.payload.newArr,resultUsers:t.payload.result,firstLoad:!0};case z.a.GET_MESSAGES:return{...e,data:t.payload.messages.reverse(),resultData:t.payload.result};default:return e}},ge=Object(K.combineReducers)({auth:J,alert:Z,theme:ee,profile:ae,status:ce,homePosts:ne,modal:le,detailPost:oe,userType:Q,admin:de,discover:ue,suggestions:pe,socket:he,notify:xe,message:fe}),ve=s(271);const _e=Object(K.createStore)(ge,Object(ve.composeWithDevTools)(Object(K.applyMiddleware)(B.a)));var Ne=e=>{let{children:t}=e;return Object(j.jsx)(i.a,{store:_e,children:t})};n.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(Ne,{children:Object(j.jsx)(Y,{})})}),document.getElementById("root")),V()},59:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return n}));var a=s(2),c=s(5);const r={LOADING:"LOADING_SUGGESTIONS",GET_USERS:"GET_USERS_SUGGESTIONS"},n=e=>async t=>{try{t({type:r.LOADING,payload:!0});const s=await Object(c.b)("suggestionsUser",e);t({type:r.GET_USERS,payload:s.data}),t({type:r.LOADING,payload:!1})}catch(s){t({type:a.c.ALERT,payload:{error:s.response.data.msg}})}}},63:function(e,t,s){"use strict";s(1);var a=s(0);t.a=e=>{let{result:t,page:s,load:c,handleLoadMore:r}=e;return Object(a.jsx)(a.Fragment,{children:t<9*(s-1)?"":!c&&Object(a.jsx)("button",{className:"btn  btn-outline-info color-c1 mx-auto d-block",onClick:r,children:"Load more."})})}},68:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return n}));var a=s(2),c=s(5);const r={LOADING:"LOADING_DISCOVER",GET_POSTS:"GET_DISCOVER_POSTS",UPDATE_POSTS:"UPDATE_DISCOVER_POSTS"},n=e=>async t=>{try{t({type:r.LOADING,payload:!0});const s=await Object(c.b)("post_discover",e);t({type:r.GET_POSTS,payload:s.data}),t({type:r.LOADING,payload:!1})}catch(s){t({type:a.c.ALERT,payload:{error:s.response.data.msg}})}}},7:function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return o})),s.d(t,"e",(function(){return i})),s.d(t,"k",(function(){return d})),s.d(t,"f",(function(){return j})),s.d(t,"i",(function(){return m})),s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return b})),s.d(t,"g",(function(){return p})),s.d(t,"h",(function(){return h})),s.d(t,"j",(function(){return O}));var a=s(2),c=s(5),r=s(55),n=s(11);const l={CREATE_POST:"CREATE_POST",LOADING_POST:"LOADING_POST",GET_POSTS:"GET_POSTS",UPDATE_POST:"UPDATE_POST",GET_POST:"GET_POST",DELETE_POST:"DELETE_POST",REPORT_POST:"REPORT_POST",SAVE_POST:"SAVE_POST"},o=e=>{let{content:t,images:s,auth:o,socket:i}=e;return async e=>{let d=[];try{e({type:a.c.ALERT,payload:{loading:!0}}),s.length>0&&(d=await Object(r.b)(s));const j=await Object(c.d)("posts",{content:t,images:d},o.token);e({type:l.CREATE_POST,payload:{...j.data.newPost,user:o.user}}),e({type:a.c.ALERT,payload:{loading:!1}});const m={id:j.data.newPost._id,text:"Added a new post.",recipients:j.data.newPost.user.followers,url:`/post/${j.data.newPost._id}`,content:t,image:d[0].url};e(Object(n.b)({msg:m,auth:o,socket:i}))}catch(j){console.log("error while posting",j)}}},i=e=>async t=>{try{t({type:l.LOADING_POST,payload:!0});const s=await Object(c.b)("posts",e);t({type:l.GET_POSTS,payload:{...s.data,page:2}}),t({type:l.LOADING_POST,payload:!1})}catch(s){console.log("error while fetching  posting",s)}},d=e=>{let{content:t,images:s,auth:n,status:o}=e;return async e=>{let i=[];const d=s.filter((e=>!e.url)),j=s.filter((e=>e.url));if(o.content!==t||0!==d.length||j.length!==o.images.length)try{e({type:a.c.ALERT,payload:{loading:!0}}),d.length>0&&(i=await Object(r.b)(d));const s=await Object(c.c)(`post/${o._id}`,{content:t,images:[...j,...i]},n.token);e({type:l.UPDATE_POST,payload:s.data.newPost}),e({type:a.c.ALERT,payload:{success:s.data.msg}})}catch(m){e({type:a.c.ALERT,payload:{error:m.response.data.msg}})}}},j=e=>{let{post:t,auth:s,socket:r}=e;return async e=>{const o={...t,likes:[...t.likes,s.user]};e({type:l.UPDATE_POST,payload:o}),r.emit("likePost",o);try{await Object(c.c)(`post/${t._id}/like`,null,s.token);const a={id:s.user._id,text:"Liked your post.",recipients:[t.user._id],url:`/post/${t._id}`,content:t.content,image:t.images[0].url};e(Object(n.b)({msg:a,auth:s,socket:r}))}catch(i){e({type:a.c.ALERT,payload:{error:i.response.data.msg}})}}},m=e=>{let{post:t,auth:s,socket:r}=e;return async e=>{const o={...t,likes:t.likes.filter((e=>e._id!==s.user._id))};e({type:l.UPDATE_POST,payload:o}),r.emit("unLikePost",o);try{await Object(c.c)(`post/${t._id}/unlike`,null,s.token);const a={id:s.user._id,text:"Liked your post.",recipients:[t.user._id],url:`/post/${t._id}`};e(Object(n.f)({msg:a,auth:s,socket:r}))}catch(i){e({type:a.c.ALERT,payload:{error:i.response.data.msg}})}}},u=e=>{let{detailPost:t,id:s,auth:a}=e;return async e=>{if(t.every((e=>e._id!==s)))try{const t=await Object(c.b)(`post/${s}`,a.token);e({type:l.GET_POST,payload:t.data.post})}catch(r){console.log("error while fetching  posting",r)}}},b=e=>{let{post:t,auth:s,socket:r}=e;return async e=>{e({type:l.DELETE_POST,payload:t});try{const a=await Object(c.a)(`post/${t._id}`,s.token),l={id:t._id,text:"Added a new post.",recipients:a.data.newPost.user.followers,url:`/post/${t._id}`};e(Object(n.f)({msg:l,auth:s,socket:r}))}catch(o){e({type:a.c.ALERT,payload:{error:o.response.data.msg}})}}},p=e=>{let{post:t,auth:s}=e;return async e=>{const r=t.reports.find((e=>e===s.user._id));if(r&&r.length>0)return e({type:a.c.ALERT,payload:{error:"You have already reported this post."}});const n={...t};n.reports.push(s.user._id),e({type:l.REPORT_POST,payload:n});try{const r=await Object(c.c)(`post/${t._id}/report`,null,s.token);e({type:a.c.ALERT,payload:{success:r.data.msg}})}catch(o){e({type:a.c.ALERT,payload:{error:o.response.data.msg}})}}},h=e=>{let{post:t,auth:s}=e;return async e=>{const r={...s.user,saved:[...s.user.saved,t._id]};e({type:a.c.AUTH,payload:{...s,user:r}});try{await Object(c.c)(`savePost/${t._id}`,null,s.token)}catch(n){e({type:a.c.ALERT,payload:{error:n.response.data.msg}})}}},O=e=>{let{post:t,auth:s}=e;return async e=>{const r={...s.user,saved:s.user.saved.filter((e=>e!==t._id))};e({type:a.c.AUTH,payload:{...s,user:r}});try{await Object(c.c)(`unSavePost/${t._id}`,null,s.token)}catch(n){e({type:a.c.ALERT,payload:{error:n.response.data.msg}})}}}},77:function(e,t,s){"use strict";s(1);var a=s(9),c=s(4),r=(s(43),s(0));t.a=e=>{let{posts:t,result:s}=e;const{theme:n}=Object(c.c)((e=>e));if(0===s)return Object(r.jsx)("h2",{className:"text-center color-c1",children:"No Post"});const l=e=>Object(r.jsx)("img",{src:e,alt:e,style:{filter:n?"invert(1)":"invert(0)"}});return Object(r.jsx)("div",{className:"post_thumb",children:t&&(null===t||void 0===t?void 0:t.map((e=>{var t,s,c,o,i;return Object(r.jsx)(a.b,{to:`/post/${e._id}`,children:Object(r.jsxs)("div",{className:"post_thumb_display",children:[null!==e&&void 0!==e&&null!==(t=e.images[0])&&void 0!==t&&null!==(s=t.url)&&void 0!==s&&s.match(/video/i)?(i=null===e||void 0===e||null===(c=e.images[0])||void 0===c?void 0:c.url,Object(r.jsx)("video",{controls:!0,src:i,alt:i,style:{filter:n?"invert(1)":"invert(0)"}})):l(null===e||void 0===e||null===(o=e.images[0])||void 0===o?void 0:o.url),Object(r.jsxs)("div",{className:"post_thumb_menu",children:[Object(r.jsx)("i",{className:"far fa-thumbs-up",children:e.likes.length}),Object(r.jsx)("i",{className:"far fa-comments",children:e.comments.length})]})]})},e._id)})))})}},78:function(e,t,s){"use strict";s(1),s(583);var a=s(273),c=s(0);t.a=e=>{let{setContent:t,content:s,theme:r}=e;return Object(c.jsxs)("div",{className:"nav-item dropdown",style:{opacity:"1",zIndex:"10",filter:r?"invert(1)":"invert(0)"},children:[Object(c.jsx)("span",{className:"nav-link position-relative px-1",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:Object(c.jsx)("span",{children:"\ud83d\ude0f"})}),Object(c.jsx)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:Object(c.jsx)(a.a,{theme:r?"dark":"light",showSkinTones:"true",showPreview:"false",onSelect:e=>t(s+e.native),i18n:{search:"Search",clear:"Clear",notfound:"No Emoji Found",skintext:"Choose your default skin tone",categories:{search:"Search Results",recent:"Frequently Used",smileys:"Smileys & Emotion",people:"People & Body",nature:"Animals & Nature",foods:"Food & Drink",activity:"Activity",places:"Travel & Places",objects:"Objects",symbols:"Symbols",flags:"Flags",custom:"Custom"},categorieslabel:"Emoji categories",skintones:{1:"Default Skin Tone",2:"Light Skin Tone",3:"Medium-Light Skin Tone",4:"Medium Skin Tone",5:"Medium-Dark Skin Tone",6:"Dark Skin Tone"}}})})]})}},92:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s(13),r=s(9),n=s(33),l=s(4),o=s(0);t.default=()=>{const[e,t]=Object(a.useState)({email:"",password:""}),[s,i]=Object(a.useState)(!1),{email:d,password:j}=e,[m,u]=Object(a.useState)(!1),{auth:b}=Object(l.c)((e=>e)),p=Object(l.b)(),h=Object(c.f)();Object(a.useEffect)((()=>{b.token&&h.push("/")}),[b.token,h]);const O=s=>{const{name:a,value:c}=s.target;t({...e,[a]:c})};return Object(o.jsx)("div",{className:"auth_page",children:Object(o.jsxs)("form",{onSubmit:t=>{t.preventDefault(),p(s?Object(n.a)(e):Object(n.c)(e))},className:"inner-shadow",children:[Object(o.jsx)("h3",{className:"text-uppercase text-center mb-4 auth-heading ",style:{fontFamily:"cursive",fontSize:"20px",fontWeight:"bold",color:"crimson"},children:"Socialgram"}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"exampleInputEmail1",className:"form-label",children:"Email address"}),Object(o.jsx)("div",{className:"outer-shadow hover-in-shadow form-input-wrap",children:Object(o.jsx)("input",{type:"email",className:"form-control ",id:"exampleInputEmail1","aria-describedby":"emailHelp",onChange:O,value:d,name:"email"})}),Object(o.jsx)("div",{id:"emailHelp",className:"form-text",children:"We'll never share your email with anyone else."})]}),Object(o.jsxs)("div",{className:"mb-3",children:[Object(o.jsx)("label",{htmlFor:"exampleInputPassword1",className:"form-label",children:"Password"}),Object(o.jsx)("div",{className:"pass",children:Object(o.jsxs)("div",{className:"outer-shadow hover-in-shadow form-input-wrap",children:[Object(o.jsx)("input",{type:m?"text":"password",className:"form-control",id:"exampleInputPassword1",onChange:O,value:j,name:"password"}),Object(o.jsx)("small",{onClick:()=>u(!m),children:m?"Hide":"Show"})]})})]}),Object(o.jsxs)("div",{className:"d-flex justify-content-evenly  mx-0 mb-4",children:[Object(o.jsxs)("label",{htmlFor:"User",children:["User:",Object(o.jsx)("input",{type:"radio",id:"User",name:"gender",value:s,defaultChecked:!0,onClick:()=>i(!1)})]}),Object(o.jsxs)("label",{htmlFor:"Admin",children:["Admin:",Object(o.jsx)("input",{type:"radio",id:"Admin",name:"gender",value:s,onClick:()=>i(!0)})]})]}),Object(o.jsx)("button",{type:"submit",className:"btn-1 w-100 d-flex outer-shadow hover-in-shadow justify-content-center",style:{color:"red"},disabled:!d||!j,children:"Login"}),Object(o.jsxs)("p",{className:"my-2",children:["Don't have an account?"," ",Object(o.jsx)(r.b,{to:"/register",style:{color:"crimson"},children:"Register Now."})]})]})})}}},[[586,1,2]]]);
//# sourceMappingURL=main.b53c03b1.chunk.js.map