{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from\"react-redux\";import{follow,unfollow}from\"../redux/actions/profileAction\";import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const FollowBtn=_ref=>{let{user}=_ref;const[followed,setFollowed]=useState(false);const{auth,profile,socket}=useSelector(state=>state);const dispatch=useDispatch();const[load,setLoad]=useState(false);useEffect(()=>{if(auth.user.following.find(item=>item._id===user._id)){setFollowed(true);}return()=>setFollowed(false);},[auth.user.following,user._id]);const handleFollow=async()=>{if(load)return;setFollowed(true);setLoad(true);await dispatch(follow({users:profile.users,user,auth,socket}));setLoad(false);};const handleUnFollow=async()=>{if(load)return;setFollowed(false);setLoad(true);await dispatch(unfollow({users:profile.users,user,auth,socket}));setLoad(false);};return/*#__PURE__*/_jsx(_Fragment,{children:followed?/*#__PURE__*/_jsx(\"button\",{className:\"btn-1 hover-in-shadow outer-shadow\",onClick:handleUnFollow,children:\"Unfollow\"}):/*#__PURE__*/_jsx(\"button\",{className:\"btn-1 hover-in-shadow outer-shadow\",onClick:handleFollow,children:\"Follow\"})});};export default FollowBtn;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","follow","unfollow","jsx","_jsx","Fragment","_Fragment","FollowBtn","_ref","user","followed","setFollowed","auth","profile","socket","state","dispatch","load","setLoad","following","find","item","_id","handleFollow","users","handleUnFollow","children","className","onClick"],"sources":["C:/Users/ANCHAL MAURYA/Desktop/mern-social-media/client/src/components/FollowBtn.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { follow, unfollow } from \"../redux/actions/profileAction\";\r\n\r\nconst FollowBtn = ({user}) => {\r\n    const [ followed, setFollowed ] = useState(false);\r\n\r\n    const { auth, profile, socket } = useSelector(state => state);\r\n    const dispatch = useDispatch();\r\n\r\n    const [load, setLoad] = useState(false);\r\n\r\n    useEffect(() => {\r\n      if (auth.user.following.find((item) => item._id === user._id)) {\r\n        setFollowed(true);\r\n      }\r\n      return () => setFollowed(false);\r\n    }, [auth.user.following, user._id]);\r\n\r\n    const handleFollow = async () => {\r\n        if(load) return;\r\n\r\n        setFollowed(true);\r\n        setLoad(true);\r\n        await dispatch(follow({ users: profile.users, user, auth, socket }));\r\n        setLoad(false);\r\n    };\r\n\r\n    const handleUnFollow = async () => {\r\n      if (load) return;\r\n\r\n      setFollowed(false);\r\n      setLoad(true);\r\n      await dispatch(unfollow({ users: profile.users, user, auth, socket }));\r\n      setLoad(false);\r\n    };\r\n\r\n\r\n    return (\r\n      <>\r\n        {followed ? (\r\n          <button className=\"btn-1 hover-in-shadow outer-shadow\" onClick={handleUnFollow}>\r\n            Unfollow\r\n          </button>\r\n        ) : (\r\n          <button className=\"btn-1 hover-in-shadow outer-shadow\" onClick={handleFollow}>\r\n            Follow\r\n          </button>\r\n        )}\r\n      </>\r\n    );\r\n}\r\n\r\nexport default FollowBtn\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,MAAM,CAAEC,QAAQ,KAAQ,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAElE,KAAM,CAAAC,SAAS,CAAGC,IAAA,EAAY,IAAX,CAACC,IAAI,CAAC,CAAAD,IAAA,CACrB,KAAM,CAAEE,QAAQ,CAAEC,WAAW,CAAE,CAAGd,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAEe,IAAI,CAAEC,OAAO,CAAEC,MAAO,CAAC,CAAGd,WAAW,CAACe,KAAK,EAAIA,KAAK,CAAC,CAC7D,KAAM,CAAAC,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACkB,IAAI,CAAEC,OAAO,CAAC,CAAGrB,QAAQ,CAAC,KAAK,CAAC,CAEvCC,SAAS,CAAC,IAAM,CACd,GAAIc,IAAI,CAACH,IAAI,CAACU,SAAS,CAACC,IAAI,CAAEC,IAAI,EAAKA,IAAI,CAACC,GAAG,GAAKb,IAAI,CAACa,GAAG,CAAC,CAAE,CAC7DX,WAAW,CAAC,IAAI,CAAC,CACnB,CACA,MAAO,IAAMA,WAAW,CAAC,KAAK,CAAC,CACjC,CAAC,CAAE,CAACC,IAAI,CAACH,IAAI,CAACU,SAAS,CAAEV,IAAI,CAACa,GAAG,CAAC,CAAC,CAEnC,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAGN,IAAI,CAAE,OAETN,WAAW,CAAC,IAAI,CAAC,CACjBO,OAAO,CAAC,IAAI,CAAC,CACb,KAAM,CAAAF,QAAQ,CAACf,MAAM,CAAC,CAAEuB,KAAK,CAAEX,OAAO,CAACW,KAAK,CAAEf,IAAI,CAAEG,IAAI,CAAEE,MAAO,CAAC,CAAC,CAAC,CACpEI,OAAO,CAAC,KAAK,CAAC,CAClB,CAAC,CAED,KAAM,CAAAO,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,GAAIR,IAAI,CAAE,OAEVN,WAAW,CAAC,KAAK,CAAC,CAClBO,OAAO,CAAC,IAAI,CAAC,CACb,KAAM,CAAAF,QAAQ,CAACd,QAAQ,CAAC,CAAEsB,KAAK,CAAEX,OAAO,CAACW,KAAK,CAAEf,IAAI,CAAEG,IAAI,CAAEE,MAAO,CAAC,CAAC,CAAC,CACtEI,OAAO,CAAC,KAAK,CAAC,CAChB,CAAC,CAGD,mBACEd,IAAA,CAAAE,SAAA,EAAAoB,QAAA,CACGhB,QAAQ,cACPN,IAAA,WAAQuB,SAAS,CAAC,oCAAoC,CAACC,OAAO,CAAEH,cAAe,CAAAC,QAAA,CAAC,UAEhF,CAAQ,CAAC,cAETtB,IAAA,WAAQuB,SAAS,CAAC,oCAAoC,CAACC,OAAO,CAAEL,YAAa,CAAAG,QAAA,CAAC,QAE9E,CAAQ,CACT,CACD,CAAC,CAET,CAAC,CAED,cAAe,CAAAnB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module"}