{"ast":null,"code":"import{BrowserRouter as Router,Route}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{useEffect}from\"react\";import io from'socket.io-client';import PageRender from\"./customRouter/PageRender\";import PrivateRouter from\"./customRouter/PrivateRouter\";import Login from\"./pages/login\";import Register from\"./pages/register\";import Home from\"./pages/home\";import Alert from\"./components/alert/Alert\";import Header from\"./components/header/Header\";import StatusModal from\"./components/StatusModal\";import{refreshToken}from\"./redux/actions/authAction\";import{getPosts}from\"./redux/actions/postAction\";import{getSuggestions}from\"./redux/actions/suggestionsAction\";import{getNotifies}from\"./redux/actions/notifyAction\";import AdminDashboard from\"./pages/adminDashboard\";import{GLOBALTYPES}from\"./redux/actions/globalTypes\";import SocketClient from\"./SocketClient\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const{auth,status,modal,userType}=useSelector(state=>state);const dispatch=useDispatch();useEffect(()=>{dispatch(refreshToken());const socket=io();dispatch({type:GLOBALTYPES.SOCKET,payload:socket});return()=>socket.close();},[dispatch]);useEffect(()=>{if(auth.token){dispatch(getPosts(auth.token));dispatch(getSuggestions(auth.token));dispatch(getNotifies(auth.token));}},[dispatch,auth.token]);useEffect(()=>{if(!(\"Notification\"in window)){alert(\"This browser does not support desktop notification\");}else if(Notification.permission===\"granted\"){}else if(Notification.permission!==\"denied\"){Notification.requestPermission().then(function(permission){if(permission===\"granted\"){}});}},[]);return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Alert,{}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"theme\"}),/*#__PURE__*/_jsx(\"div\",{className:`App ${(status||modal)&&\"mode\"}`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[userType===\"user\"&&auth.token&&/*#__PURE__*/_jsx(Header,{}),status&&/*#__PURE__*/_jsx(StatusModal,{}),auth.token&&/*#__PURE__*/_jsx(SocketClient,{}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",component:userType===\"user\"?auth.token?Home:Login:auth.token?AdminDashboard:Login}),userType===\"user\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register\",component:Register}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrap_page\",children:[/*#__PURE__*/_jsx(PrivateRouter,{exact:true,path:\"/:page\",component:PageRender}),/*#__PURE__*/_jsx(PrivateRouter,{exact:true,path:\"/:page/:id\",component:PageRender})]})]})]})})]});}export default App;","map":{"version":3,"names":["BrowserRouter","Router","Route","useDispatch","useSelector","useEffect","io","PageRender","PrivateRouter","Login","Register","Home","Alert","Header","StatusModal","refreshToken","getPosts","getSuggestions","getNotifies","AdminDashboard","GLOBALTYPES","SocketClient","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","auth","status","modal","userType","state","dispatch","socket","type","SOCKET","payload","close","token","window","alert","Notification","permission","requestPermission","then","children","id","className","exact","path","component"],"sources":["C:/Users/ANCHAL MAURYA/Desktop/mern-social-media/client/src/App.js"],"sourcesContent":["import { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\nimport io from 'socket.io-client'\r\n\r\nimport PageRender from \"./customRouter/PageRender\";\r\nimport PrivateRouter from \"./customRouter/PrivateRouter\";\r\nimport Login from \"./pages/login\";\r\nimport Register from \"./pages/register\";\r\nimport Home from \"./pages/home\";\r\nimport Alert from \"./components/alert/Alert\";\r\nimport Header from \"./components/header/Header\";\r\nimport StatusModal from \"./components/StatusModal\";\r\nimport { refreshToken } from \"./redux/actions/authAction\";\r\nimport { getPosts } from \"./redux/actions/postAction\";\r\nimport { getSuggestions } from \"./redux/actions/suggestionsAction\";\r\nimport { getNotifies } from \"./redux/actions/notifyAction\";\r\n\r\nimport AdminDashboard from \"./pages/adminDashboard\";\r\nimport { GLOBALTYPES } from \"./redux/actions/globalTypes\";\r\nimport SocketClient from \"./SocketClient\";\r\n\r\nfunction App() {\r\n  const { auth, status, modal, userType } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(refreshToken());\r\n\r\n    const socket = io();\r\n    dispatch({type: GLOBALTYPES.SOCKET, payload: socket })\r\n    return () => socket.close()\r\n  }, [dispatch]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (auth.token) {\r\n      dispatch(getPosts(auth.token));\r\n      dispatch(getSuggestions(auth.token));\r\n      dispatch(getNotifies(auth.token));\r\n    }\r\n  }, [dispatch, auth.token]);\r\n\r\n  useEffect(() => {\r\n    if (!(\"Notification\" in window)) {\r\n      alert(\"This browser does not support desktop notification\");\r\n    } else if (Notification.permission === \"granted\") {\r\n\r\n    } else if (Notification.permission !== \"denied\") {\r\n      Notification.requestPermission().then(function (permission) {\r\n        if (permission === \"granted\") {\r\n        }\r\n      });\r\n    }\r\n  }, [])\r\n\r\n   \r\n\r\n  return (\r\n    <Router>\r\n      <Alert />\r\n      <input type=\"checkbox\" id=\"theme\" />\r\n      <div className={`App ${(status || modal) && \"mode\"}`}>\r\n        <div className=\"main\">\r\n          {userType === \"user\" && auth.token && <Header />}\r\n          {status && <StatusModal />}\r\n          {auth.token && <SocketClient /> }\r\n          <Route\r\n            exact\r\n            path=\"/\"\r\n            component={\r\n              userType === \"user\"\r\n                ? auth.token\r\n                  ? Home\r\n                  : Login\r\n                : auth.token\r\n                ? AdminDashboard\r\n                : Login\r\n            }\r\n          />\r\n\r\n          {userType === \"user\" && (\r\n            <>\r\n              <Route exact path=\"/register\" component={Register} />\r\n              <div className=\"wrap_page\">\r\n                <PrivateRouter exact path=\"/:page\" component={PageRender} />\r\n                <PrivateRouter exact path=\"/:page/:id\" component={PageRender} />\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}