{"ast":null,"code":"import React,{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{getDataAPI}from\"../../utils/fetchData\";import{GLOBALTYPES}from\"../../redux/actions/globalTypes\";// import { Link } from \"react-router-dom\";\nimport UserCard from\"../UserCard\";import LoadIcon from\"../../images/loading.gif\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Search=()=>{const[search,setSearch]=useState(\"\");const[users,setUsers]=useState([]);const{auth}=useSelector(state=>state);const dispatch=useDispatch();const[load,setLoad]=useState(false);const handleSearch=async e=>{e.preventDefault();if(!search)return;try{setLoad(true);const res=await getDataAPI(`search?username=${search}`,auth.token);setUsers(res.data.users);setLoad(false);}catch(err){dispatch({type:GLOBALTYPES.ALERT,payload:{error:err.response.data.msg}});}};const handleClose=()=>{setSearch(\"\");setUsers([]);};return/*#__PURE__*/_jsxs(\"form\",{className:\"search_form\",onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",title:\"Enter to Search\",name:\"search\",value:search,id:\"search\",onChange:e=>setSearch(e.target.value.toLowerCase().replace(/ /g,\" \"))}),/*#__PURE__*/_jsxs(\"div\",{className:\"search_icon\",style:{opacity:search?0:0.3},children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",children:\"search\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Enter to Search\"})]}),/*#__PURE__*/_jsx(\"div\",{onClick:handleClose,className:\"close_search\",style:{opacity:users.length===0?0:1},children:\"\\xD7\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{display:\"none\"},children:\"Search\"}),load&&/*#__PURE__*/_jsx(\"img\",{className:\"loading\",src:LoadIcon,alt:\"Loading\"}),/*#__PURE__*/_jsx(\"div\",{className:\"users\",children:search&&users.map(user=>/*#__PURE__*/_jsx(UserCard,{user:user,border:\"border\",handleClose:handleClose},user._id))})]});};export default Search;","map":{"version":3,"names":["React","useState","useDispatch","useSelector","getDataAPI","GLOBALTYPES","UserCard","LoadIcon","jsx","_jsx","jsxs","_jsxs","Search","search","setSearch","users","setUsers","auth","state","dispatch","load","setLoad","handleSearch","e","preventDefault","res","token","data","err","type","ALERT","payload","error","response","msg","handleClose","className","onSubmit","children","title","name","value","id","onChange","target","toLowerCase","replace","style","opacity","onClick","length","display","src","alt","map","user","border","_id"],"sources":["C:/Users/ANCHAL MAURYA/Desktop/mern-social-media/client/src/components/header/Search.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getDataAPI } from \"../../utils/fetchData\";\r\nimport { GLOBALTYPES } from \"../../redux/actions/globalTypes\";\r\n// import { Link } from \"react-router-dom\";\r\nimport UserCard from \"../UserCard\";\r\nimport LoadIcon from \"../../images/loading.gif\";\r\n\r\nconst Search = () => {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [users, setUsers] = useState([]);\r\n\r\n  const { auth } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n  const [load, setLoad] = useState(false);\r\n\r\n  const handleSearch = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!search) return;\r\n\r\n    try {\r\n      setLoad(true);\r\n      const res = await getDataAPI(`search?username=${search}`, auth.token);\r\n      setUsers(res.data.users);\r\n      setLoad(false);\r\n    } catch (err) {\r\n      dispatch({\r\n        type: GLOBALTYPES.ALERT,\r\n        payload: { error: err.response.data.msg },\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setSearch(\"\");\r\n    setUsers([]);\r\n  };\r\n\r\n  return (\r\n    <form className=\"search_form\" onSubmit={handleSearch}>\r\n      <input\r\n        type=\"text\"\r\n        title=\"Enter to Search\"\r\n        name=\"search\"\r\n        value={search}\r\n        id=\"search\"\r\n        onChange={(e) =>\r\n          setSearch(e.target.value.toLowerCase().replace(/ /g, \" \"))\r\n        }\r\n      />\r\n      <div className=\"search_icon\" style={{ opacity: search ? 0 : 0.3 }}>\r\n        <span className=\"material-icons\">search</span>\r\n        <span>Enter to Search</span>\r\n      </div>\r\n\r\n      <div\r\n        onClick={handleClose}\r\n        className=\"close_search\"\r\n        style={{ opacity: users.length === 0 ? 0 : 1 }}\r\n      >\r\n        &times;\r\n      </div>\r\n\r\n      <button type=\"submit\" style={{ display: \"none\" }}>\r\n        Search\r\n      </button>\r\n\r\n      {load && <img className=\"loading\" src={LoadIcon} alt=\"Loading\" />}\r\n\r\n      <div className=\"users\">\r\n        {search &&\r\n          users.map((user) => (\r\n            <UserCard\r\n              key={user._id}\r\n              user={user}\r\n              border=\"border\"\r\n              handleClose={handleClose}\r\n            />\r\n          ))}\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Search;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}