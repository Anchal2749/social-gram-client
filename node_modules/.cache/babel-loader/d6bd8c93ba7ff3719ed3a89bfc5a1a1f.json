{"ast":null,"code":"import{GLOBALTYPES}from'./globalTypes';import{postDataAPI,deleteDataAPI,getDataAPI,patchDataAPI}from'../../utils/fetchData';export const NOTIFY_TYPES={GET_NOTIFIES:\"GET_NOTIFIES\",CREATE_NOTIFY:\"CREATE_NOTIFY\",REMOVE_NOTIFY:\"REMOVE_NOTIFY\",UPDATE_NOTIFY:\"UPDATE_NOTIFY\",UPDATE_SOUND:\"UPDATE_SOUND\",DELETE_ALL_NOTIFICATIONS:\"DELETE_ALL_NOTIFICATIONS\"};export const createNotify=_ref=>{let{msg,auth,socket}=_ref;return async dispatch=>{try{const res=await postDataAPI(`notify`,msg,auth.token);socket.emit('createNotify',{...res.data.notify,user:{username:auth.user.username,avatar:auth.user.avatar}});}catch(err){dispatch({type:GLOBALTYPES.ALERT,payload:{error:err.response.data.msg}});}};};export const removeNotify=_ref2=>{let{msg,auth,socket}=_ref2;return async dispatch=>{try{await deleteDataAPI(`notify/${msg.id}?url=${msg.url}`,auth.token);socket.emit(\"removeNotify\",msg);}catch(err){dispatch({type:GLOBALTYPES.ALERT,payload:{error:err.response.data.msg}});}};};export const getNotifies=token=>async dispatch=>{try{const res=await getDataAPI('notifies',token);dispatch({type:NOTIFY_TYPES.GET_NOTIFIES,payload:res.data.notifies});}catch(err){dispatch({type:GLOBALTYPES.ALERT,payload:{error:err.response.data.msg}});}};export const isReadNotify=_ref3=>{let{msg,auth}=_ref3;return async dispatch=>{dispatch({type:NOTIFY_TYPES.UPDATE_NOTIFY,payload:{...msg,isRead:true}});try{await patchDataAPI(`isReadNotify/${msg._id}`,null,auth.token);}catch(err){dispatch({type:GLOBALTYPES.ALERT,payload:{error:err.response.data.msg}});}};};export const deleteAllNotifies=token=>async dispatch=>{dispatch({type:NOTIFY_TYPES.DELETE_ALL_NOTIFICATIONS,payload:[]});try{await deleteDataAPI(`deleteAllNotify`,token);}catch(err){dispatch({type:GLOBALTYPES.ALERT,payload:{error:err.response.data.msg}});}};","map":{"version":3,"names":["GLOBALTYPES","postDataAPI","deleteDataAPI","getDataAPI","patchDataAPI","NOTIFY_TYPES","GET_NOTIFIES","CREATE_NOTIFY","REMOVE_NOTIFY","UPDATE_NOTIFY","UPDATE_SOUND","DELETE_ALL_NOTIFICATIONS","createNotify","_ref","msg","auth","socket","dispatch","res","token","emit","data","notify","user","username","avatar","err","type","ALERT","payload","error","response","removeNotify","_ref2","id","url","getNotifies","notifies","isReadNotify","_ref3","isRead","_id","deleteAllNotifies"],"sources":["C:/Users/ANCHAL MAURYA/Desktop/mern-social-media/client/src/redux/actions/notifyAction.js"],"sourcesContent":["import { GLOBALTYPES } from './globalTypes';\r\nimport { postDataAPI, deleteDataAPI, getDataAPI, patchDataAPI } from '../../utils/fetchData';\r\n\r\nexport const NOTIFY_TYPES = {\r\n  GET_NOTIFIES: \"GET_NOTIFIES\",\r\n  CREATE_NOTIFY: \"CREATE_NOTIFY\",\r\n  REMOVE_NOTIFY: \"REMOVE_NOTIFY\",\r\n  UPDATE_NOTIFY: \"UPDATE_NOTIFY\",\r\n  UPDATE_SOUND: \"UPDATE_SOUND\",\r\n  DELETE_ALL_NOTIFICATIONS: \"DELETE_ALL_NOTIFICATIONS\",\r\n};\r\n\r\nexport const createNotify = ({msg, auth, socket }) => async (dispatch) => {\r\n\r\n    try {\r\n        const res = await postDataAPI(`notify`, msg, auth.token);\r\n        socket.emit('createNotify', {\r\n          ...res.data.notify,\r\n          user: {\r\n            username: auth.user.username,\r\n            avatar: auth.user.avatar,\r\n          }\r\n        });\r\n    } catch (err) {\r\n        dispatch({type: GLOBALTYPES.ALERT, payload: {error: err.response.data.msg} })\r\n    }\r\n};\r\n\r\nexport const removeNotify = ({ msg, auth, socket }) => async (dispatch) => {\r\n  try {\r\n    await deleteDataAPI(`notify/${msg.id}?url=${msg.url}`, auth.token);\r\n    socket.emit(\"removeNotify\", msg);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n\r\nexport const getNotifies = (token) => async (dispatch) => {\r\n  try {\r\n    const res = await getDataAPI('notifies', token);\r\n    \r\n    dispatch({type: NOTIFY_TYPES.GET_NOTIFIES, payload: res.data.notifies});\r\n    \r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n\r\nexport const isReadNotify = ({msg, auth}) => async (dispatch) => {\r\n\r\n  dispatch({type: NOTIFY_TYPES.UPDATE_NOTIFY, payload: {...msg, isRead: true} });\r\n\r\n  try {\r\n    await patchDataAPI(`isReadNotify/${msg._id}`,null, auth.token);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n\r\nexport const deleteAllNotifies = (token) => async (dispatch) => {\r\n  dispatch({ type: NOTIFY_TYPES.DELETE_ALL_NOTIFICATIONS, payload: [] });\r\n\r\n  try {\r\n    await deleteDataAPI(`deleteAllNotify`, token);\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GLOBALTYPES.ALERT,\r\n      payload: { error: err.response.data.msg },\r\n    });\r\n  }\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}