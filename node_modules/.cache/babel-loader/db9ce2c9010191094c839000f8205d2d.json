{"ast":null,"code":"import React from'react';import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import Avatar from\"./Avatar\";import moment from'moment';import{deleteAllNotifies,isReadNotify,NOTIFY_TYPES}from'../redux/actions/notifyAction';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NotifyModal=()=>{const{auth,notify}=useSelector(state=>state);const dispatch=useDispatch();const handleIsRead=msg=>{dispatch(isReadNotify({msg,auth}));};const handleDeleteAll=()=>{const newArr=notify.data.filter(item=>item.isRead===false);if(newArr.length===0)return dispatch(deleteAllNotifies(auth.token));if(window.confirm(`You have ${newArr.length} unread notifications.Do you want to delete all notifications?`)){return dispatch(deleteAllNotifies(auth.token));}};const handleSound=()=>{dispatch({type:NOTIFY_TYPES.UPDATE_SOUND,payload:!notify.sound});};return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1\",style:{minWidth:\"280px\",boxShadow:\"5px 8px 8px var(--c2) ,-3px -3px 8px var(--c3)\",background:\"white\",borderRadius:\"10px\",borderTopRightRadius:\"0\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Notifications\"}),notify.sound?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bell text-danger\",style:{fontSize:\"1.2rem\",cursor:\"pointer\"},onClick:handleSound}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bell-slash text-danger\",style:{fontSize:\"1.2rem\",cursor:\"pointer\"},onClick:handleSound})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"mt-1\"}),notify.data.length===0&&/*#__PURE__*/_jsx(\"span\",{className:\"text-muted w-100 text-center\",children:\"No Notifications\"}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:\"calc(100vh - 200px)\",overflow:\"auto\"},children:notify.data.map((msg,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"px-2 mb-3\",children:[/*#__PURE__*/_jsxs(Link,{to:`${msg.url}`,style:{textDecoration:\"none\"},className:\"d-flex text-dark align-items-center\",onClick:()=>handleIsRead(msg),children:[/*#__PURE__*/_jsx(Avatar,{src:msg.user.avatar,size:\"big-avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-fill mx-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{className:\"mr-1\",children:msg.user.username}),/*#__PURE__*/_jsx(\"span\",{children:msg.text})]}),msg.content&&/*#__PURE__*/_jsxs(\"small\",{children:[msg.content.slice(0,20),\"...\"]})]}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"30px\"},children:msg.image&&/*#__PURE__*/_jsx(Avatar,{src:msg.image,size:\"medium-avatar\"})})]}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-muted d-flex justify-content-between px-2\",children:[moment(msg.createdAt).fromNow(),!msg.isRead&&/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-circle color-c1\"})]})]},index))}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-end my-auto me-2 color-c1\",style:{cursor:\"pointer\"},onClick:handleDeleteAll,children:\"Delete\"})]});};export default NotifyModal;","map":{"version":3,"names":["React","useDispatch","useSelector","Link","Avatar","moment","deleteAllNotifies","isReadNotify","NOTIFY_TYPES","jsx","_jsx","jsxs","_jsxs","NotifyModal","auth","notify","state","dispatch","handleIsRead","msg","handleDeleteAll","newArr","data","filter","item","isRead","length","token","window","confirm","handleSound","type","UPDATE_SOUND","payload","sound","className","style","minWidth","boxShadow","background","borderRadius","borderTopRightRadius","children","fontSize","cursor","onClick","maxHeight","overflow","map","index","to","url","textDecoration","src","user","avatar","size","username","text","content","slice","width","image","createdAt","fromNow"],"sources":["C:/Users/ANCHAL MAURYA/Desktop/mern-social-media/client/src/components/NotifyModal.js"],"sourcesContent":["import React from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Avatar from \"./Avatar\";\r\nimport moment from 'moment';\r\nimport { deleteAllNotifies, isReadNotify, NOTIFY_TYPES } from '../redux/actions/notifyAction';\r\n\r\nconst NotifyModal = () => {\r\n    const { auth, notify } = useSelector(state => state);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleIsRead = (msg) => {\r\n      dispatch(isReadNotify({msg, auth}));\r\n    };\r\n\r\n    const handleDeleteAll = () => {\r\n      const newArr = notify.data.filter(item => item.isRead === false)\r\n      if(newArr.length === 0) return dispatch(deleteAllNotifies(auth.token))\r\n\r\n      if(window.confirm(`You have ${newArr.length} unread notifications.Do you want to delete all notifications?`)){\r\n        return dispatch(deleteAllNotifies(auth.token))\r\n      }\r\n    };\r\n\r\n    const handleSound = () => {\r\n      dispatch({type: NOTIFY_TYPES.UPDATE_SOUND, payload: !notify.sound });\r\n    };\r\n\r\n    return (\r\n      <div\r\n        className=\"mt-1\"\r\n        style={{\r\n          minWidth: \"280px\",\r\n          boxShadow: \"5px 8px 8px var(--c2) ,-3px -3px 8px var(--c3)\",\r\n          background: \"white\",\r\n          borderRadius: \"10px\",\r\n          borderTopRightRadius: \"0\",\r\n        }}\r\n      >\r\n        <div className=\"d-flex justify-content-between align-items-center\">\r\n          <h3>Notifications</h3>\r\n          {notify.sound ? (\r\n            <i\r\n              className=\"fas fa-bell text-danger\"\r\n              style={{ fontSize: \"1.2rem\", cursor: \"pointer\" }}\r\n              onClick={handleSound}\r\n            />\r\n          ) : (\r\n            <i\r\n              className=\"fas fa-bell-slash text-danger\"\r\n              style={{ fontSize: \"1.2rem\", cursor: \"pointer\" }}\r\n              onClick={handleSound}\r\n            />\r\n          )}\r\n        </div>\r\n        <hr className=\"mt-1\" />\r\n        {notify.data.length === 0 && (\r\n          <span className=\"text-muted w-100 text-center\">No Notifications</span>\r\n        )}\r\n        <div style={{ maxHeight: \"calc(100vh - 200px)\", overflow: \"auto\" }}>\r\n          {notify.data.map((msg, index) => (\r\n            <div className=\"px-2 mb-3\" key={index}>\r\n              <Link\r\n                to={`${msg.url}`}\r\n                style={{ textDecoration: \"none\" }}\r\n                className=\"d-flex text-dark align-items-center\"\r\n                onClick={() => handleIsRead(msg)}\r\n              >\r\n                <Avatar src={msg.user.avatar} size=\"big-avatar\" />\r\n\r\n                <div className=\"flex-fill mx-1\">\r\n                  <div>\r\n                    <strong className=\"mr-1\">{msg.user.username}</strong>\r\n                    <span>{msg.text}</span>\r\n                  </div>\r\n                  {msg.content && <small>{msg.content.slice(0, 20)}...</small>}\r\n                </div>\r\n                <div style={{ width: \"30px\" }}>\r\n                  {msg.image && <Avatar src={msg.image} size=\"medium-avatar\" />}\r\n                </div>\r\n              </Link>\r\n              <small className=\"text-muted d-flex justify-content-between px-2\">\r\n                {moment(msg.createdAt).fromNow()}\r\n                {!msg.isRead && <i className=\"fas fa-circle color-c1\" />}\r\n              </small>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <hr className=\"my-1\" />\r\n        <div\r\n          className=\"text-end my-auto me-2 color-c1\"\r\n          style={{ cursor: \"pointer\" }}\r\n          onClick={handleDeleteAll}\r\n        >\r\n          Delete\r\n        </div>\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default NotifyModal\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,MAAM,KAAM,QAAQ,CAC3B,OAASC,iBAAiB,CAAEC,YAAY,CAAEC,YAAY,KAAQ,+BAA+B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE9F,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACtB,KAAM,CAAEC,IAAI,CAAEC,MAAO,CAAC,CAAGb,WAAW,CAACc,KAAK,EAAIA,KAAK,CAAC,CACpD,KAAM,CAAAC,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAiB,YAAY,CAAIC,GAAG,EAAK,CAC5BF,QAAQ,CAACV,YAAY,CAAC,CAACY,GAAG,CAAEL,IAAI,CAAC,CAAC,CAAC,CACrC,CAAC,CAED,KAAM,CAAAM,eAAe,CAAGA,CAAA,GAAM,CAC5B,KAAM,CAAAC,MAAM,CAAGN,MAAM,CAACO,IAAI,CAACC,MAAM,CAACC,IAAI,EAAIA,IAAI,CAACC,MAAM,GAAK,KAAK,CAAC,CAChE,GAAGJ,MAAM,CAACK,MAAM,GAAK,CAAC,CAAE,MAAO,CAAAT,QAAQ,CAACX,iBAAiB,CAACQ,IAAI,CAACa,KAAK,CAAC,CAAC,CAEtE,GAAGC,MAAM,CAACC,OAAO,CAAC,YAAYR,MAAM,CAACK,MAAM,gEAAgE,CAAC,CAAC,CAC3G,MAAO,CAAAT,QAAQ,CAACX,iBAAiB,CAACQ,IAAI,CAACa,KAAK,CAAC,CAAC,CAChD,CACF,CAAC,CAED,KAAM,CAAAG,WAAW,CAAGA,CAAA,GAAM,CACxBb,QAAQ,CAAC,CAACc,IAAI,CAAEvB,YAAY,CAACwB,YAAY,CAAEC,OAAO,CAAE,CAAClB,MAAM,CAACmB,KAAM,CAAC,CAAC,CACtE,CAAC,CAED,mBACEtB,KAAA,QACEuB,SAAS,CAAC,MAAM,CAChBC,KAAK,CAAE,CACLC,QAAQ,CAAE,OAAO,CACjBC,SAAS,CAAE,gDAAgD,CAC3DC,UAAU,CAAE,OAAO,CACnBC,YAAY,CAAE,MAAM,CACpBC,oBAAoB,CAAE,GACxB,CAAE,CAAAC,QAAA,eAEF9B,KAAA,QAAKuB,SAAS,CAAC,mDAAmD,CAAAO,QAAA,eAChEhC,IAAA,OAAAgC,QAAA,CAAI,eAAa,CAAI,CAAC,CACrB3B,MAAM,CAACmB,KAAK,cACXxB,IAAA,MACEyB,SAAS,CAAC,yBAAyB,CACnCC,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEC,MAAM,CAAE,SAAU,CAAE,CACjDC,OAAO,CAAEf,WAAY,CACtB,CAAC,cAEFpB,IAAA,MACEyB,SAAS,CAAC,+BAA+B,CACzCC,KAAK,CAAE,CAAEO,QAAQ,CAAE,QAAQ,CAAEC,MAAM,CAAE,SAAU,CAAE,CACjDC,OAAO,CAAEf,WAAY,CACtB,CACF,EACE,CAAC,cACNpB,IAAA,OAAIyB,SAAS,CAAC,MAAM,CAAE,CAAC,CACtBpB,MAAM,CAACO,IAAI,CAACI,MAAM,GAAK,CAAC,eACvBhB,IAAA,SAAMyB,SAAS,CAAC,8BAA8B,CAAAO,QAAA,CAAC,kBAAgB,CAAM,CACtE,cACDhC,IAAA,QAAK0B,KAAK,CAAE,CAAEU,SAAS,CAAE,qBAAqB,CAAEC,QAAQ,CAAE,MAAO,CAAE,CAAAL,QAAA,CAChE3B,MAAM,CAACO,IAAI,CAAC0B,GAAG,CAAC,CAAC7B,GAAG,CAAE8B,KAAK,gBAC1BrC,KAAA,QAAKuB,SAAS,CAAC,WAAW,CAAAO,QAAA,eACxB9B,KAAA,CAACT,IAAI,EACH+C,EAAE,CAAE,GAAG/B,GAAG,CAACgC,GAAG,EAAG,CACjBf,KAAK,CAAE,CAAEgB,cAAc,CAAE,MAAO,CAAE,CAClCjB,SAAS,CAAC,qCAAqC,CAC/CU,OAAO,CAAEA,CAAA,GAAM3B,YAAY,CAACC,GAAG,CAAE,CAAAuB,QAAA,eAEjChC,IAAA,CAACN,MAAM,EAACiD,GAAG,CAAElC,GAAG,CAACmC,IAAI,CAACC,MAAO,CAACC,IAAI,CAAC,YAAY,CAAE,CAAC,cAElD5C,KAAA,QAAKuB,SAAS,CAAC,gBAAgB,CAAAO,QAAA,eAC7B9B,KAAA,QAAA8B,QAAA,eACEhC,IAAA,WAAQyB,SAAS,CAAC,MAAM,CAAAO,QAAA,CAAEvB,GAAG,CAACmC,IAAI,CAACG,QAAQ,CAAS,CAAC,cACrD/C,IAAA,SAAAgC,QAAA,CAAOvB,GAAG,CAACuC,IAAI,CAAO,CAAC,EACpB,CAAC,CACLvC,GAAG,CAACwC,OAAO,eAAI/C,KAAA,UAAA8B,QAAA,EAAQvB,GAAG,CAACwC,OAAO,CAACC,KAAK,CAAC,CAAC,CAAE,EAAE,CAAC,CAAC,KAAG,EAAO,CAAC,EACzD,CAAC,cACNlD,IAAA,QAAK0B,KAAK,CAAE,CAAEyB,KAAK,CAAE,MAAO,CAAE,CAAAnB,QAAA,CAC3BvB,GAAG,CAAC2C,KAAK,eAAIpD,IAAA,CAACN,MAAM,EAACiD,GAAG,CAAElC,GAAG,CAAC2C,KAAM,CAACN,IAAI,CAAC,eAAe,CAAE,CAAC,CAC1D,CAAC,EACF,CAAC,cACP5C,KAAA,UAAOuB,SAAS,CAAC,gDAAgD,CAAAO,QAAA,EAC9DrC,MAAM,CAACc,GAAG,CAAC4C,SAAS,CAAC,CAACC,OAAO,CAAC,CAAC,CAC/B,CAAC7C,GAAG,CAACM,MAAM,eAAIf,IAAA,MAAGyB,SAAS,CAAC,wBAAwB,CAAE,CAAC,EACnD,CAAC,GAvBsBc,KAwB3B,CACN,CAAC,CACC,CAAC,cACNvC,IAAA,OAAIyB,SAAS,CAAC,MAAM,CAAE,CAAC,cACvBzB,IAAA,QACEyB,SAAS,CAAC,gCAAgC,CAC1CC,KAAK,CAAE,CAAEQ,MAAM,CAAE,SAAU,CAAE,CAC7BC,OAAO,CAAEzB,eAAgB,CAAAsB,QAAA,CAC1B,QAED,CAAK,CAAC,EACH,CAAC,CAEZ,CAAC,CAED,cAAe,CAAA7B,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module"}