{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from\"react-redux\";import{getDiscoverPosts,DISCOVER_TYPES}from\"../redux/actions/discoverAction\";import LoadIcon from'../images/loading.gif';import PostThumb from\"../components/PostThumb\";import LoadMoreBtn from'../components/LoadMoreBtn';import{getDataAPI}from'../utils/fetchData';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Discover=()=>{const{auth,discover}=useSelector(state=>state);const dispatch=useDispatch();const[load,setLoad]=useState(false);useEffect(()=>{if(!discover.firstLoad){dispatch(getDiscoverPosts(auth.token));}},[dispatch,auth.token,discover.firstLoad]);const handleLoadMore=async()=>{setLoad(true);const res=await getDataAPI(`post_discover?num=${discover.page*8}`,auth.token);dispatch({type:DISCOVER_TYPES.UPDATE_POSTS,payload:res.data});setLoad(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[discover.loading?/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\",className:\"d-block mx-auto my-4\"}):/*#__PURE__*/_jsx(PostThumb,{posts:discover.posts,result:discover.result}),load&&/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\",className:\"d-block mx-auto\"}),!discover.loading&&/*#__PURE__*/_jsx(LoadMoreBtn,{result:discover.result,page:discover.page,load:load,handleLoadMore:handleLoadMore})]});};export default Discover;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","getDiscoverPosts","DISCOVER_TYPES","LoadIcon","PostThumb","LoadMoreBtn","getDataAPI","jsx","_jsx","jsxs","_jsxs","Discover","auth","discover","state","dispatch","load","setLoad","firstLoad","token","handleLoadMore","res","page","type","UPDATE_POSTS","payload","data","children","loading","src","alt","className","posts","result"],"sources":["C:/Users/ANCHAL MAURYA/Desktop/mern-social-media/client/src/pages/discover.js"],"sourcesContent":["import React, { useState, useEffect} from 'react';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getDiscoverPosts, DISCOVER_TYPES } from \"../redux/actions/discoverAction\";\r\nimport LoadIcon from '../images/loading.gif';\r\nimport PostThumb from \"../components/PostThumb\";\r\nimport LoadMoreBtn from '../components/LoadMoreBtn';\r\nimport { getDataAPI } from '../utils/fetchData';\r\n\r\nconst Discover = () => {\r\n    const { auth, discover } = useSelector(state => state);\r\n    const dispatch = useDispatch();\r\n\r\n    const [load, setLoad] = useState(false);\r\n\r\n    useEffect(() => {\r\n      if (!discover.firstLoad) {\r\n        dispatch(getDiscoverPosts(auth.token));\r\n      }\r\n    }, [dispatch, auth.token, discover.firstLoad]);\r\n\r\n    const handleLoadMore = async () => {\r\n        setLoad(true);\r\n        const res = await getDataAPI(`post_discover?num=${discover.page * 8}`, auth.token);\r\n        dispatch({ type: DISCOVER_TYPES.UPDATE_POSTS, payload: res.data });\r\n        setLoad(false);\r\n    };\r\n\r\n    return (\r\n      <div>\r\n        {discover.loading ? (\r\n          <img\r\n            src={LoadIcon}\r\n            alt=\"Loading...\"\r\n            className=\"d-block mx-auto my-4\"\r\n          />\r\n        ) : (\r\n            <PostThumb posts={discover.posts} result={discover.result} />\r\n          \r\n        )}\r\n\r\n        {load && (\r\n          <img src={LoadIcon} alt=\"Loading...\" className=\"d-block mx-auto\" />\r\n        )}\r\n\r\n        {!discover.loading && (\r\n          <LoadMoreBtn\r\n            result={discover.result}\r\n            page={discover.page}\r\n            load={load}\r\n            handleLoadMore={handleLoadMore}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n}\r\n\r\nexport default Discover;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CACjD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,gBAAgB,CAAEC,cAAc,KAAQ,iCAAiC,CAClF,MAAO,CAAAC,QAAQ,KAAM,uBAAuB,CAC5C,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAC/C,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CACnD,OAASC,UAAU,KAAQ,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,CACnB,KAAM,CAAEC,IAAI,CAAEC,QAAS,CAAC,CAAGb,WAAW,CAACc,KAAK,EAAIA,KAAK,CAAC,CACtD,KAAM,CAAAC,QAAQ,CAAGhB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACiB,IAAI,CAAEC,OAAO,CAAC,CAAGpB,QAAQ,CAAC,KAAK,CAAC,CAEvCC,SAAS,CAAC,IAAM,CACd,GAAI,CAACe,QAAQ,CAACK,SAAS,CAAE,CACvBH,QAAQ,CAACd,gBAAgB,CAACW,IAAI,CAACO,KAAK,CAAC,CAAC,CACxC,CACF,CAAC,CAAE,CAACJ,QAAQ,CAAEH,IAAI,CAACO,KAAK,CAAEN,QAAQ,CAACK,SAAS,CAAC,CAAC,CAE9C,KAAM,CAAAE,cAAc,CAAG,KAAAA,CAAA,GAAY,CAC/BH,OAAO,CAAC,IAAI,CAAC,CACb,KAAM,CAAAI,GAAG,CAAG,KAAM,CAAAf,UAAU,CAAC,qBAAqBO,QAAQ,CAACS,IAAI,CAAG,CAAC,EAAE,CAAEV,IAAI,CAACO,KAAK,CAAC,CAClFJ,QAAQ,CAAC,CAAEQ,IAAI,CAAErB,cAAc,CAACsB,YAAY,CAAEC,OAAO,CAAEJ,GAAG,CAACK,IAAK,CAAC,CAAC,CAClET,OAAO,CAAC,KAAK,CAAC,CAClB,CAAC,CAED,mBACEP,KAAA,QAAAiB,QAAA,EACGd,QAAQ,CAACe,OAAO,cACfpB,IAAA,QACEqB,GAAG,CAAE1B,QAAS,CACd2B,GAAG,CAAC,YAAY,CAChBC,SAAS,CAAC,sBAAsB,CACjC,CAAC,cAEAvB,IAAA,CAACJ,SAAS,EAAC4B,KAAK,CAAEnB,QAAQ,CAACmB,KAAM,CAACC,MAAM,CAAEpB,QAAQ,CAACoB,MAAO,CAAE,CAE/D,CAEAjB,IAAI,eACHR,IAAA,QAAKqB,GAAG,CAAE1B,QAAS,CAAC2B,GAAG,CAAC,YAAY,CAACC,SAAS,CAAC,iBAAiB,CAAE,CACnE,CAEA,CAAClB,QAAQ,CAACe,OAAO,eAChBpB,IAAA,CAACH,WAAW,EACV4B,MAAM,CAAEpB,QAAQ,CAACoB,MAAO,CACxBX,IAAI,CAAET,QAAQ,CAACS,IAAK,CACpBN,IAAI,CAAEA,IAAK,CACXI,cAAc,CAAEA,cAAe,CAChC,CACF,EACE,CAAC,CAEZ,CAAC,CAED,cAAe,CAAAT,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module"}