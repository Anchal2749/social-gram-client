{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import UserCard from\"../UserCard\";import{useDispatch,useSelector}from'react-redux';import{useParams}from'react-router-dom';import MsgDisplay from'./MsgDisplay';import Icons from\"../Icons\";import{GLOBALTYPES}from'../../redux/actions/globalTypes';import{imageShow,videoShow}from'../../utils/mediaShow';import{imageUpload}from'../../utils/imageUpload';import{addMessage,getMessages,MESSAGE_TYPES}from'../../redux/actions/messageAction';import LoadIcon from'../../images/loading.gif';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RightSide=()=>{const{auth,message,theme,socket}=useSelector(state=>state);const dispatch=useDispatch();const[user,setUser]=useState([]);const[text,setText]=useState('');const[page,setPage]=useState(0);const[data,setData]=useState([]);const{id}=useParams();const[media,setMedia]=useState([]);const[loadMedia,setLoadMedia]=useState(false);const refDisplay=useRef();const pageEnd=useRef();useEffect(()=>{const newData=message.data.filter(item=>item.sender===auth.user._id||item.sender===id);setData(newData);},[message.data,auth.user._id,id]);useEffect(()=>{const newUser=message.users.find(user=>user._id===id);if(newUser){setUser(newUser);}},[message.users,id]);const handleChangeMedia=e=>{const files=[...e.target.files];let err=\"\";let newMedia=[];files.forEach(file=>{if(!file){return err=\"File does not exist.\";}if(file.size>1024*1024*5){return err=\"Image size must be less than 5 mb.\";}return newMedia.push(file);});if(err){dispatch({type:GLOBALTYPES.ALERT,payload:{error:err}});}setMedia([...media,...newMedia]);};const handleDeleteMedia=index=>{const newArr=[...media];newArr.splice(index,1);setMedia(newArr);};const handleSubmit=async e=>{e.preventDefault();if(!text.trim()&&media.length===0)return;setText('');setMedia([]);setLoadMedia(true);let newArr=[];if(media.length>0)newArr=await imageUpload(media);const msg={sender:auth.user._id,recipient:id,text,media:newArr,createdAt:new Date().toISOString()};setLoadMedia(false);await dispatch(addMessage({msg,auth,socket}));if(refDisplay.current){refDisplay.current.scrollIntoView({behaviour:\"smooth\",block:\"end\"});}};useEffect(()=>{if(id){const getMessagesData=async()=>{dispatch({type:MESSAGE_TYPES.GET_MESSAGES,payload:{messages:[]}});setPage(1);await dispatch(getMessages({auth,id}));if(refDisplay.current){refDisplay.current.scrollIntoView({behaviour:'smooth',block:'end'});}};getMessagesData();}},[id,dispatch,auth]);// load more\nuseEffect(()=>{const observer=new IntersectionObserver(entries=>{if(entries[0].isIntersecting){setPage(p=>p+1);}},{threshold:0.1});observer.observe(pageEnd.current);},[setPage]);useEffect(()=>{if(message.resultData>=(page-1)*9&&page>1){dispatch(getMessages({auth,id,page}));}},[message.resultData,page,id,auth,dispatch]);useEffect(()=>{if(refDisplay.current){refDisplay.current.scrollIntoView({behaviour:\"smooth\",block:\"end\"});}},[text]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"message_header\",children:user.length!==0&&/*#__PURE__*/_jsx(UserCard,{user:user,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash text-danger\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat_container\",style:{height:media.length>0?\"calc(100% - 180px)\":\"\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"chat_display\",ref:refDisplay,children:[/*#__PURE__*/_jsx(\"button\",{style:{marginTop:'-25px',opacity:0},ref:pageEnd,children:\"Load..\"}),data.map((msg,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[msg.sender!==auth.user._id&&/*#__PURE__*/_jsx(\"div\",{className:\"chat_row other_message\",children:/*#__PURE__*/_jsx(MsgDisplay,{user:user,msg:msg,theme:theme})}),msg.sender===auth.user._id&&/*#__PURE__*/_jsx(\"div\",{className:\"chat_row you_message\",children:/*#__PURE__*/_jsx(MsgDisplay,{user:auth.user,msg:msg,theme:theme})})]},index)),loadMedia&&/*#__PURE__*/_jsx(\"div\",{className:\"chat_row you_message\",children:/*#__PURE__*/_jsx(\"img\",{src:LoadIcon,alt:\"Loading...\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"show_media\",style:{display:media.length>0?\"\":\"none\"},children:media.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{id:\"file_media\",children:[item.type.match(/video/i)?videoShow(URL.createObjectURL(item),theme):imageShow(URL.createObjectURL(item),theme),/*#__PURE__*/_jsx(\"span\",{onClick:()=>handleDeleteMedia(index),children:\"\\xD7\"})]},index))}),/*#__PURE__*/_jsxs(\"form\",{className:\"chat_input\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Type a message.\",type:\"text\",value:text,onChange:e=>setText(e.target.value),style:{filter:theme?\"invert(1)\":\"invert(0)\",background:theme?'#040404':'',color:theme?'white':''}}),/*#__PURE__*/_jsx(Icons,{setContent:setText,content:text,theme:theme}),/*#__PURE__*/_jsxs(\"div\",{className:\"file_upload\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-image color-c1\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",id:\"file\",multiple:true,accept:\"image/*,video/*\",onChange:handleChangeMedia})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:text||media.length>0?false:true,className:\"material-icons\",children:\"near_me\"})]})]});};export default RightSide;","map":{"version":3,"names":["React","useEffect","useState","useRef","UserCard","useDispatch","useSelector","useParams","MsgDisplay","Icons","GLOBALTYPES","imageShow","videoShow","imageUpload","addMessage","getMessages","MESSAGE_TYPES","LoadIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RightSide","auth","message","theme","socket","state","dispatch","user","setUser","text","setText","page","setPage","data","setData","id","media","setMedia","loadMedia","setLoadMedia","refDisplay","pageEnd","newData","filter","item","sender","_id","newUser","users","find","handleChangeMedia","e","files","target","err","newMedia","forEach","file","size","push","type","ALERT","payload","error","handleDeleteMedia","index","newArr","splice","handleSubmit","preventDefault","trim","length","msg","recipient","createdAt","Date","toISOString","current","scrollIntoView","behaviour","block","getMessagesData","GET_MESSAGES","messages","observer","IntersectionObserver","entries","isIntersecting","p","threshold","observe","resultData","children","className","style","height","ref","marginTop","opacity","map","src","alt","display","match","URL","createObjectURL","onClick","onSubmit","placeholder","value","onChange","background","color","setContent","content","name","multiple","accept","disabled"],"sources":["C:/Users/ANCHAL MAURYA/Desktop/mern-social-media/client/src/components/message/RightSide.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport UserCard from \"../UserCard\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport MsgDisplay from './MsgDisplay';\r\nimport Icons from \"../Icons\";\r\nimport { GLOBALTYPES } from '../../redux/actions/globalTypes';\r\nimport { imageShow, videoShow } from '../../utils/mediaShow';\r\nimport { imageUpload } from '../../utils/imageUpload';\r\nimport { addMessage, getMessages, MESSAGE_TYPES } from '../../redux/actions/messageAction';\r\nimport LoadIcon from '../../images/loading.gif';\r\n\r\nconst RightSide = () => {\r\n    const { auth, message, theme, socket } = useSelector(state => state);\r\n    const dispatch = useDispatch();\r\n    const [user, setUser] = useState([]);\r\n    const [text, setText] = useState('');\r\n    const [page, setPage] = useState(0);\r\n    const [data, setData] = useState([]);\r\n    const { id } = useParams();\r\n    const [media, setMedia] = useState([]);\r\n    const [loadMedia, setLoadMedia] = useState(false);\r\n\r\n    const refDisplay = useRef();\r\n    const pageEnd = useRef();\r\n\r\n    useEffect(() => {\r\n      const newData = message.data.filter(\r\n        (item) => item.sender === auth.user._id || item.sender === id\r\n      );\r\n      setData(newData);\r\n    }, [message.data, auth.user._id, id]);\r\n\r\n    useEffect(() => {\r\n      const newUser = message.users.find((user) => user._id === id);\r\n      if (newUser) {\r\n        setUser(newUser);\r\n      }\r\n    }, [message.users, id]);\r\n\r\n    const handleChangeMedia = (e) => {\r\n      const files = [...e.target.files];\r\n    let err = \"\";\r\n    let newMedia = [];\r\n\r\n    files.forEach((file) => {\r\n      if (!file) {\r\n        return (err = \"File does not exist.\");\r\n      }\r\n      if (file.size > 1024 * 1024 * 5) {\r\n        return (err = \"Image size must be less than 5 mb.\");\r\n      }\r\n      return newMedia.push(file);\r\n    });\r\n    if (err) {\r\n      dispatch({ type: GLOBALTYPES.ALERT, payload: { error: err } });\r\n    }\r\n    setMedia([...media, ...newMedia]);\r\n    };\r\n\r\n    const handleDeleteMedia = (index) => {\r\n      const newArr = [...media];\r\n      newArr.splice(index, 1);\r\n      setMedia(newArr);\r\n    };\r\n\r\n    const handleSubmit = async e => {\r\n      e.preventDefault();\r\n      if(!text.trim() && media.length === 0) return;\r\n      setText('');\r\n      setMedia([]);\r\n\r\n      setLoadMedia(true);\r\n\r\n      let newArr = [];\r\n      if(media.length > 0) newArr = await imageUpload(media);\r\n\r\n      const msg = {\r\n        sender: auth.user._id,\r\n        recipient: id,\r\n        text,\r\n        media: newArr,\r\n        createdAt: new Date().toISOString()\r\n      }\r\n      setLoadMedia(false);\r\n      await dispatch(addMessage({msg, auth, socket}));\r\n      if (refDisplay.current) {\r\n        refDisplay.current.scrollIntoView({\r\n          behaviour: \"smooth\",\r\n          block: \"end\",\r\n        });\r\n      }\r\n    };\r\n\r\n    useEffect(() => {\r\n      if (id) {\r\n        const getMessagesData = async () => {\r\n\r\n          dispatch({type: MESSAGE_TYPES.GET_MESSAGES, payload: { messages: [] } });\r\n          \r\n          setPage(1);\r\n          await dispatch(getMessages({ auth, id }));\r\n          if(refDisplay.current){\r\n            refDisplay.current.scrollIntoView({behaviour: 'smooth', block: 'end'});\r\n          }\r\n        };\r\n\r\n        getMessagesData();\r\n      }\r\n    }, [id, dispatch, auth]);\r\n\r\n    // load more\r\n\r\n    useEffect(() => {\r\n      const observer = new IntersectionObserver(\r\n        (entries) => {\r\n          if (entries[0].isIntersecting) {\r\n            setPage((p) => p + 1);\r\n          }\r\n        },\r\n        {\r\n          threshold: 0.1,\r\n        }\r\n      );\r\n      observer.observe(pageEnd.current);\r\n    }, [setPage]);\r\n\r\n    useEffect(() => {\r\n      if (message.resultData >= (page - 1) * 9 && page > 1) {\r\n        dispatch(getMessages({ auth, id, page }));\r\n      }\r\n    }, [message.resultData, page, id, auth, dispatch]);\r\n\r\n    useEffect(() => {\r\n      if (refDisplay.current) {\r\n        refDisplay.current.scrollIntoView({\r\n          behaviour: \"smooth\",\r\n          block: \"end\",\r\n        });\r\n      }\r\n    }, [text])\r\n\r\n    return (\r\n      <>\r\n        <div className=\"message_header\">\r\n          {user.length !== 0 && (\r\n            <UserCard user={user}>\r\n              <i className=\"fas fa-trash text-danger\" />\r\n            </UserCard>\r\n          )}\r\n        </div>\r\n\r\n        <div\r\n          className=\"chat_container\"\r\n          style={{ height: media.length > 0 ? \"calc(100% - 180px)\" : \"\" }}\r\n        >\r\n          <div className=\"chat_display\" ref={refDisplay}>\r\n            <button style={{marginTop: '-25px', opacity: 0}} ref={pageEnd}>Load..</button>\r\n\r\n            {data.map((msg, index) => (\r\n              <div key={index}>\r\n                {msg.sender !== auth.user._id && (\r\n                  <div className=\"chat_row other_message\">\r\n                    <MsgDisplay user={user} msg={msg} theme={theme} />\r\n                  </div>\r\n                )}\r\n                {msg.sender === auth.user._id && (\r\n                  <div className=\"chat_row you_message\">\r\n                    <MsgDisplay user={auth.user} msg={msg} theme={theme} />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ))}\r\n            {loadMedia && (\r\n              <div className=\"chat_row you_message\">\r\n                <img src={LoadIcon} alt=\"Loading...\" />\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          className=\"show_media\"\r\n          style={{ display: media.length > 0 ? \"\" : \"none\" }}\r\n        >\r\n          {media.map((item, index) => (\r\n            <div key={index} id=\"file_media\">\r\n              {item.type.match(/video/i)\r\n                ? videoShow(URL.createObjectURL(item), theme)\r\n                : imageShow(URL.createObjectURL(item), theme)}\r\n              <span onClick={() => handleDeleteMedia(index)}>&times;</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <form className=\"chat_input\" onSubmit={handleSubmit}>\r\n          <input\r\n            placeholder=\"Type a message.\"\r\n            type=\"text\"\r\n            value={text}\r\n            onChange={(e) => setText(e.target.value)}\r\n            style={{ filter: theme ? \"invert(1)\" : \"invert(0)\" , background: theme ? '#040404' : '', color: theme ? 'white' : ''}}\r\n          />\r\n          <Icons setContent={setText} content={text} theme={theme} />\r\n          <div className=\"file_upload\">\r\n            <i className=\"fas fa-image color-c1\" />\r\n            <input\r\n              type=\"file\"\r\n              name=\"file\"\r\n              id=\"file\"\r\n              multiple\r\n              accept=\"image/*,video/*\"\r\n              onChange={handleChangeMedia}\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={text || media.length > 0 ? false : true}\r\n            className=\"material-icons\"\r\n          >\r\n            near_me\r\n          </button>\r\n        </form>\r\n      </>\r\n    );\r\n}\r\n\r\nexport default RightSide\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC1D,MAAO,CAAAC,QAAQ,KAAM,aAAa,CAClC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,MAAO,CAAAC,KAAK,KAAM,UAAU,CAC5B,OAASC,WAAW,KAAQ,iCAAiC,CAC7D,OAASC,SAAS,CAAEC,SAAS,KAAQ,uBAAuB,CAC5D,OAASC,WAAW,KAAQ,yBAAyB,CACrD,OAASC,UAAU,CAAEC,WAAW,CAAEC,aAAa,KAAQ,mCAAmC,CAC1F,MAAO,CAAAC,QAAQ,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEhD,KAAM,CAAAC,SAAS,CAAGA,CAAA,GAAM,CACpB,KAAM,CAAEC,IAAI,CAAEC,OAAO,CAAEC,KAAK,CAAEC,MAAO,CAAC,CAAGtB,WAAW,CAACuB,KAAK,EAAIA,KAAK,CAAC,CACpE,KAAM,CAAAC,QAAQ,CAAGzB,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAC0B,IAAI,CAAEC,OAAO,CAAC,CAAG9B,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAAC+B,IAAI,CAAEC,OAAO,CAAC,CAAGhC,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACiC,IAAI,CAAEC,OAAO,CAAC,CAAGlC,QAAQ,CAAC,CAAC,CAAC,CACnC,KAAM,CAACmC,IAAI,CAAEC,OAAO,CAAC,CAAGpC,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAAEqC,EAAG,CAAC,CAAGhC,SAAS,CAAC,CAAC,CAC1B,KAAM,CAACiC,KAAK,CAAEC,QAAQ,CAAC,CAAGvC,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACwC,SAAS,CAAEC,YAAY,CAAC,CAAGzC,QAAQ,CAAC,KAAK,CAAC,CAEjD,KAAM,CAAA0C,UAAU,CAAGzC,MAAM,CAAC,CAAC,CAC3B,KAAM,CAAA0C,OAAO,CAAG1C,MAAM,CAAC,CAAC,CAExBF,SAAS,CAAC,IAAM,CACd,KAAM,CAAA6C,OAAO,CAAGpB,OAAO,CAACW,IAAI,CAACU,MAAM,CAChCC,IAAI,EAAKA,IAAI,CAACC,MAAM,GAAKxB,IAAI,CAACM,IAAI,CAACmB,GAAG,EAAIF,IAAI,CAACC,MAAM,GAAKV,EAC7D,CAAC,CACDD,OAAO,CAACQ,OAAO,CAAC,CAClB,CAAC,CAAE,CAACpB,OAAO,CAACW,IAAI,CAAEZ,IAAI,CAACM,IAAI,CAACmB,GAAG,CAAEX,EAAE,CAAC,CAAC,CAErCtC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAkD,OAAO,CAAGzB,OAAO,CAAC0B,KAAK,CAACC,IAAI,CAAEtB,IAAI,EAAKA,IAAI,CAACmB,GAAG,GAAKX,EAAE,CAAC,CAC7D,GAAIY,OAAO,CAAE,CACXnB,OAAO,CAACmB,OAAO,CAAC,CAClB,CACF,CAAC,CAAE,CAACzB,OAAO,CAAC0B,KAAK,CAAEb,EAAE,CAAC,CAAC,CAEvB,KAAM,CAAAe,iBAAiB,CAAIC,CAAC,EAAK,CAC/B,KAAM,CAAAC,KAAK,CAAG,CAAC,GAAGD,CAAC,CAACE,MAAM,CAACD,KAAK,CAAC,CACnC,GAAI,CAAAE,GAAG,CAAG,EAAE,CACZ,GAAI,CAAAC,QAAQ,CAAG,EAAE,CAEjBH,KAAK,CAACI,OAAO,CAAEC,IAAI,EAAK,CACtB,GAAI,CAACA,IAAI,CAAE,CACT,MAAQ,CAAAH,GAAG,CAAG,sBAAsB,CACtC,CACA,GAAIG,IAAI,CAACC,IAAI,CAAG,IAAI,CAAG,IAAI,CAAG,CAAC,CAAE,CAC/B,MAAQ,CAAAJ,GAAG,CAAG,oCAAoC,CACpD,CACA,MAAO,CAAAC,QAAQ,CAACI,IAAI,CAACF,IAAI,CAAC,CAC5B,CAAC,CAAC,CACF,GAAIH,GAAG,CAAE,CACP5B,QAAQ,CAAC,CAAEkC,IAAI,CAAEtD,WAAW,CAACuD,KAAK,CAAEC,OAAO,CAAE,CAAEC,KAAK,CAAET,GAAI,CAAE,CAAC,CAAC,CAChE,CACAjB,QAAQ,CAAC,CAAC,GAAGD,KAAK,CAAE,GAAGmB,QAAQ,CAAC,CAAC,CACjC,CAAC,CAED,KAAM,CAAAS,iBAAiB,CAAIC,KAAK,EAAK,CACnC,KAAM,CAAAC,MAAM,CAAG,CAAC,GAAG9B,KAAK,CAAC,CACzB8B,MAAM,CAACC,MAAM,CAACF,KAAK,CAAE,CAAC,CAAC,CACvB5B,QAAQ,CAAC6B,MAAM,CAAC,CAClB,CAAC,CAED,KAAM,CAAAE,YAAY,CAAG,KAAM,CAAAjB,CAAC,EAAI,CAC9BA,CAAC,CAACkB,cAAc,CAAC,CAAC,CAClB,GAAG,CAACxC,IAAI,CAACyC,IAAI,CAAC,CAAC,EAAIlC,KAAK,CAACmC,MAAM,GAAK,CAAC,CAAE,OACvCzC,OAAO,CAAC,EAAE,CAAC,CACXO,QAAQ,CAAC,EAAE,CAAC,CAEZE,YAAY,CAAC,IAAI,CAAC,CAElB,GAAI,CAAA2B,MAAM,CAAG,EAAE,CACf,GAAG9B,KAAK,CAACmC,MAAM,CAAG,CAAC,CAAEL,MAAM,CAAG,KAAM,CAAAzD,WAAW,CAAC2B,KAAK,CAAC,CAEtD,KAAM,CAAAoC,GAAG,CAAG,CACV3B,MAAM,CAAExB,IAAI,CAACM,IAAI,CAACmB,GAAG,CACrB2B,SAAS,CAAEtC,EAAE,CACbN,IAAI,CACJO,KAAK,CAAE8B,MAAM,CACbQ,SAAS,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CACpC,CAAC,CACDrC,YAAY,CAAC,KAAK,CAAC,CACnB,KAAM,CAAAb,QAAQ,CAAChB,UAAU,CAAC,CAAC8D,GAAG,CAAEnD,IAAI,CAAEG,MAAM,CAAC,CAAC,CAAC,CAC/C,GAAIgB,UAAU,CAACqC,OAAO,CAAE,CACtBrC,UAAU,CAACqC,OAAO,CAACC,cAAc,CAAC,CAChCC,SAAS,CAAE,QAAQ,CACnBC,KAAK,CAAE,KACT,CAAC,CAAC,CACJ,CACF,CAAC,CAEDnF,SAAS,CAAC,IAAM,CACd,GAAIsC,EAAE,CAAE,CACN,KAAM,CAAA8C,eAAe,CAAG,KAAAA,CAAA,GAAY,CAElCvD,QAAQ,CAAC,CAACkC,IAAI,CAAEhD,aAAa,CAACsE,YAAY,CAAEpB,OAAO,CAAE,CAAEqB,QAAQ,CAAE,EAAG,CAAE,CAAC,CAAC,CAExEnD,OAAO,CAAC,CAAC,CAAC,CACV,KAAM,CAAAN,QAAQ,CAACf,WAAW,CAAC,CAAEU,IAAI,CAAEc,EAAG,CAAC,CAAC,CAAC,CACzC,GAAGK,UAAU,CAACqC,OAAO,CAAC,CACpBrC,UAAU,CAACqC,OAAO,CAACC,cAAc,CAAC,CAACC,SAAS,CAAE,QAAQ,CAAEC,KAAK,CAAE,KAAK,CAAC,CAAC,CACxE,CACF,CAAC,CAEDC,eAAe,CAAC,CAAC,CACnB,CACF,CAAC,CAAE,CAAC9C,EAAE,CAAET,QAAQ,CAAEL,IAAI,CAAC,CAAC,CAExB;AAEAxB,SAAS,CAAC,IAAM,CACd,KAAM,CAAAuF,QAAQ,CAAG,GAAI,CAAAC,oBAAoB,CACtCC,OAAO,EAAK,CACX,GAAIA,OAAO,CAAC,CAAC,CAAC,CAACC,cAAc,CAAE,CAC7BvD,OAAO,CAAEwD,CAAC,EAAKA,CAAC,CAAG,CAAC,CAAC,CACvB,CACF,CAAC,CACD,CACEC,SAAS,CAAE,GACb,CACF,CAAC,CACDL,QAAQ,CAACM,OAAO,CAACjD,OAAO,CAACoC,OAAO,CAAC,CACnC,CAAC,CAAE,CAAC7C,OAAO,CAAC,CAAC,CAEbnC,SAAS,CAAC,IAAM,CACd,GAAIyB,OAAO,CAACqE,UAAU,EAAI,CAAC5D,IAAI,CAAG,CAAC,EAAI,CAAC,EAAIA,IAAI,CAAG,CAAC,CAAE,CACpDL,QAAQ,CAACf,WAAW,CAAC,CAAEU,IAAI,CAAEc,EAAE,CAAEJ,IAAK,CAAC,CAAC,CAAC,CAC3C,CACF,CAAC,CAAE,CAACT,OAAO,CAACqE,UAAU,CAAE5D,IAAI,CAAEI,EAAE,CAAEd,IAAI,CAAEK,QAAQ,CAAC,CAAC,CAElD7B,SAAS,CAAC,IAAM,CACd,GAAI2C,UAAU,CAACqC,OAAO,CAAE,CACtBrC,UAAU,CAACqC,OAAO,CAACC,cAAc,CAAC,CAChCC,SAAS,CAAE,QAAQ,CACnBC,KAAK,CAAE,KACT,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACnD,IAAI,CAAC,CAAC,CAEV,mBACEZ,KAAA,CAAAE,SAAA,EAAAyE,QAAA,eACE7E,IAAA,QAAK8E,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAC5BjE,IAAI,CAAC4C,MAAM,GAAK,CAAC,eAChBxD,IAAA,CAACf,QAAQ,EAAC2B,IAAI,CAAEA,IAAK,CAAAiE,QAAA,cACnB7E,IAAA,MAAG8E,SAAS,CAAC,0BAA0B,CAAE,CAAC,CAClC,CACX,CACE,CAAC,cAEN9E,IAAA,QACE8E,SAAS,CAAC,gBAAgB,CAC1BC,KAAK,CAAE,CAAEC,MAAM,CAAE3D,KAAK,CAACmC,MAAM,CAAG,CAAC,CAAG,oBAAoB,CAAG,EAAG,CAAE,CAAAqB,QAAA,cAEhE3E,KAAA,QAAK4E,SAAS,CAAC,cAAc,CAACG,GAAG,CAAExD,UAAW,CAAAoD,QAAA,eAC5C7E,IAAA,WAAQ+E,KAAK,CAAE,CAACG,SAAS,CAAE,OAAO,CAAEC,OAAO,CAAE,CAAC,CAAE,CAACF,GAAG,CAAEvD,OAAQ,CAAAmD,QAAA,CAAC,QAAM,CAAQ,CAAC,CAE7E3D,IAAI,CAACkE,GAAG,CAAC,CAAC3B,GAAG,CAAEP,KAAK,gBACnBhD,KAAA,QAAA2E,QAAA,EACGpB,GAAG,CAAC3B,MAAM,GAAKxB,IAAI,CAACM,IAAI,CAACmB,GAAG,eAC3B/B,IAAA,QAAK8E,SAAS,CAAC,wBAAwB,CAAAD,QAAA,cACrC7E,IAAA,CAACX,UAAU,EAACuB,IAAI,CAAEA,IAAK,CAAC6C,GAAG,CAAEA,GAAI,CAACjD,KAAK,CAAEA,KAAM,CAAE,CAAC,CAC/C,CACN,CACAiD,GAAG,CAAC3B,MAAM,GAAKxB,IAAI,CAACM,IAAI,CAACmB,GAAG,eAC3B/B,IAAA,QAAK8E,SAAS,CAAC,sBAAsB,CAAAD,QAAA,cACnC7E,IAAA,CAACX,UAAU,EAACuB,IAAI,CAAEN,IAAI,CAACM,IAAK,CAAC6C,GAAG,CAAEA,GAAI,CAACjD,KAAK,CAAEA,KAAM,CAAE,CAAC,CACpD,CACN,GAVO0C,KAWL,CACN,CAAC,CACD3B,SAAS,eACRvB,IAAA,QAAK8E,SAAS,CAAC,sBAAsB,CAAAD,QAAA,cACnC7E,IAAA,QAAKqF,GAAG,CAAEvF,QAAS,CAACwF,GAAG,CAAC,YAAY,CAAE,CAAC,CACpC,CACN,EACE,CAAC,CACH,CAAC,cAENtF,IAAA,QACE8E,SAAS,CAAC,YAAY,CACtBC,KAAK,CAAE,CAAEQ,OAAO,CAAElE,KAAK,CAACmC,MAAM,CAAG,CAAC,CAAG,EAAE,CAAG,MAAO,CAAE,CAAAqB,QAAA,CAElDxD,KAAK,CAAC+D,GAAG,CAAC,CAACvD,IAAI,CAAEqB,KAAK,gBACrBhD,KAAA,QAAiBkB,EAAE,CAAC,YAAY,CAAAyD,QAAA,EAC7BhD,IAAI,CAACgB,IAAI,CAAC2C,KAAK,CAAC,QAAQ,CAAC,CACtB/F,SAAS,CAACgG,GAAG,CAACC,eAAe,CAAC7D,IAAI,CAAC,CAAErB,KAAK,CAAC,CAC3ChB,SAAS,CAACiG,GAAG,CAACC,eAAe,CAAC7D,IAAI,CAAC,CAAErB,KAAK,CAAC,cAC/CR,IAAA,SAAM2F,OAAO,CAAEA,CAAA,GAAM1C,iBAAiB,CAACC,KAAK,CAAE,CAAA2B,QAAA,CAAC,MAAO,CAAM,CAAC,GAJrD3B,KAKL,CACN,CAAC,CACC,CAAC,cAENhD,KAAA,SAAM4E,SAAS,CAAC,YAAY,CAACc,QAAQ,CAAEvC,YAAa,CAAAwB,QAAA,eAClD7E,IAAA,UACE6F,WAAW,CAAC,iBAAiB,CAC7BhD,IAAI,CAAC,MAAM,CACXiD,KAAK,CAAEhF,IAAK,CACZiF,QAAQ,CAAG3D,CAAC,EAAKrB,OAAO,CAACqB,CAAC,CAACE,MAAM,CAACwD,KAAK,CAAE,CACzCf,KAAK,CAAE,CAAEnD,MAAM,CAAEpB,KAAK,CAAG,WAAW,CAAG,WAAW,CAAGwF,UAAU,CAAExF,KAAK,CAAG,SAAS,CAAG,EAAE,CAAEyF,KAAK,CAAEzF,KAAK,CAAG,OAAO,CAAG,EAAE,CAAE,CACvH,CAAC,cACFR,IAAA,CAACV,KAAK,EAAC4G,UAAU,CAAEnF,OAAQ,CAACoF,OAAO,CAAErF,IAAK,CAACN,KAAK,CAAEA,KAAM,CAAE,CAAC,cAC3DN,KAAA,QAAK4E,SAAS,CAAC,aAAa,CAAAD,QAAA,eAC1B7E,IAAA,MAAG8E,SAAS,CAAC,uBAAuB,CAAE,CAAC,cACvC9E,IAAA,UACE6C,IAAI,CAAC,MAAM,CACXuD,IAAI,CAAC,MAAM,CACXhF,EAAE,CAAC,MAAM,CACTiF,QAAQ,MACRC,MAAM,CAAC,iBAAiB,CACxBP,QAAQ,CAAE5D,iBAAkB,CAC7B,CAAC,EACC,CAAC,cACNnC,IAAA,WACE6C,IAAI,CAAC,QAAQ,CACb0D,QAAQ,CAAEzF,IAAI,EAAIO,KAAK,CAACmC,MAAM,CAAG,CAAC,CAAG,KAAK,CAAG,IAAK,CAClDsB,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAC3B,SAED,CAAQ,CAAC,EACL,CAAC,EACP,CAAC,CAET,CAAC,CAED,cAAe,CAAAxE,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module"}