{"ast":null,"code":"import React from\"react\";import Avatar from\"../../Avatar\";import{Link,useHistory}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import moment from\"moment\";import{BASE_URL}from'../../../utils/config';import{GLOBALTYPES}from\"../../../redux/actions/globalTypes\";import{deletePost,reportPost}from\"../../../redux/actions/postAction\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CardHeader=_ref=>{let{post}=_ref;const{auth,socket}=useSelector(state=>state);const dispatch=useDispatch();const history=useHistory();const handleEditPost=()=>{dispatch({type:GLOBALTYPES.STATUS,payload:{...post,onEdit:true}});};const handleDeletePost=()=>{if(window.confirm(\"Are you sure?\")){dispatch(deletePost({post,auth,socket}));return history.push(\"/\");}};const handleReportPost=()=>{dispatch(reportPost({post,auth}));};const handleCopyLink=()=>{navigator.clipboard.writeText(`${BASE_URL}/post/${post._id}`);};return/*#__PURE__*/_jsxs(\"div\",{className:\"card_header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"outer-shadow big-avatar-cover me-2\",children:/*#__PURE__*/_jsx(Avatar,{src:post.user.avatar,size:\"big-avatar\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card_name\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"m-0\",children:/*#__PURE__*/_jsx(Link,{className:\"text-dark\",to:`/profile/${post.user._id}`,children:post.user.username})}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:moment(post.createdAt).fromNow()})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"nav-item dropdown\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons\",id:\"moreLink\",\"data-bs-toggle\":\"dropdown\",children:\"more_horiz\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",children:[auth.user._id===post.user._id&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:handleEditPost,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons text-info\",children:\" create\"}),\"Edit Post\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:handleDeletePost,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons text-red\",children:\" delete\"}),\"Delete Post\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:handleCopyLink,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons text-primary\",children:\"content_copy\"}),\"Copy Link\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-item\",onClick:handleReportPost,children:[/*#__PURE__*/_jsx(\"span\",{className:\"material-icons text-yellow\",children:\"report_problem\"}),\"Report this post\"]})]})]})]});};export default CardHeader;","map":{"version":3,"names":["React","Avatar","Link","useHistory","useDispatch","useSelector","moment","BASE_URL","GLOBALTYPES","deletePost","reportPost","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CardHeader","_ref","post","auth","socket","state","dispatch","history","handleEditPost","type","STATUS","payload","onEdit","handleDeletePost","window","confirm","push","handleReportPost","handleCopyLink","navigator","clipboard","writeText","_id","className","children","src","user","avatar","size","to","username","createdAt","fromNow","id","onClick"],"sources":["C:/Users/ANCHAL MAURYA/Desktop/mern-social-media/client/src/components/home/post_card/CardHeader.js"],"sourcesContent":["import React from \"react\";\r\nimport Avatar from \"../../Avatar\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport moment from \"moment\";\r\nimport { BASE_URL } from '../../../utils/config'\r\n\r\nimport { GLOBALTYPES } from \"../../../redux/actions/globalTypes\";\r\nimport { deletePost, reportPost } from \"../../../redux/actions/postAction\";\r\n\r\nconst CardHeader = ({ post }) => {\r\n  const { auth, socket } = useSelector((state) => state);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const handleEditPost = () => {\r\n    dispatch({ type: GLOBALTYPES.STATUS, payload: { ...post, onEdit: true } });\r\n  };\r\n\r\n  const handleDeletePost = () => {\r\n    if(window.confirm(\"Are you sure?\")){\r\n      dispatch(deletePost({ post, auth, socket }));\r\n      return history.push(\"/\");\r\n    }\r\n    \r\n  };\r\n\r\n\r\n  const handleReportPost = () => {\r\n    dispatch(reportPost({post, auth}));\r\n  };\r\n\r\n  const handleCopyLink = () => {\r\n    navigator.clipboard.writeText(`${BASE_URL}/post/${post._id}`)\r\n  };\r\n\r\n  return (\r\n    <div className=\"card_header\">\r\n      <div className=\"d-flex\">\r\n        <div className=\"outer-shadow big-avatar-cover me-2\">\r\n          <Avatar src={post.user.avatar} size=\"big-avatar\" />\r\n        </div>\r\n        <div className=\"card_name\">\r\n          <h6 className=\"m-0\">\r\n            <Link className=\"text-dark\" to={`/profile/${post.user._id}`}>\r\n              {post.user.username}\r\n            </Link>\r\n          </h6>\r\n          <small className=\"text-muted\">\r\n            {moment(post.createdAt).fromNow()}\r\n          </small>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"nav-item dropdown\">\r\n        <span\r\n          className=\"material-icons\"\r\n          id=\"moreLink\"\r\n          data-bs-toggle=\"dropdown\"\r\n        >\r\n          more_horiz\r\n        </span>\r\n\r\n        <div className=\"dropdown-menu\">\r\n          {auth.user._id === post.user._id && (\r\n            <>\r\n              <div className=\"dropdown-item\" onClick={handleEditPost}>\r\n                <span className=\"material-icons text-info\"> create</span>Edit\r\n                Post\r\n              </div>\r\n              <div className=\"dropdown-item\" onClick={handleDeletePost}>\r\n                <span className=\"material-icons text-red\"> delete</span>Delete\r\n                Post\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          <div className=\"dropdown-item\" onClick={handleCopyLink}>\r\n            <span className=\"material-icons text-primary\">content_copy</span>\r\n            Copy Link\r\n          </div>\r\n          <div className=\"dropdown-item\" onClick={handleReportPost}>\r\n            <span className=\"material-icons text-yellow\">report_problem</span>\r\n            Report this post\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CardHeader;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}